# User Response to Diagnostics System Plan

**Status**: APPROVED

**Date**: 2026-01-10 21:15:00

**User Response**: "Approve - looks good!"

## Approved Plan Files

The following planning documents were approved for implementation:

1. **EVALUATION-20260110-211500.md** - Current state analysis showing 0-30% implementation of spec
2. **EVAL-20260110-211500.md** - Gap analysis with resolved ambiguities
3. **PLAN-20260110-211500.md** - Sprint 1 implementation plan
4. **DOD-20260110-211500.md** - Definition of done with 15 acceptance criteria
5. **CONTEXT-20260110-211500.md** - Implementation context with file locations and patterns

## Sprint 1 Deliverables (Approved)

### Deliverable 1: Core Type System & Event Infrastructure
- TargetRef discriminated union (7 kinds)
- Diagnostic interface with stable ID generation
- EventHub with type-safe event subscriptions
- 5 core event types (GraphCommitted, CompileBegin, CompileEnd, ProgramSwapped, RuntimeHealthSnapshot)

**Acceptance Criteria**: 5 criteria covering type safety, determinism, and event handling

### Deliverable 2: DiagnosticHub State Manager
- DiagnosticHub class with five-event subscription contract
- Compile/authoring/runtime snapshot management
- Authoring validators (TimeRoot checks, disconnected blocks)
- MobX DiagnosticStore wrapper

**Acceptance Criteria**: 5 criteria covering performance, snapshot replacement, and reactivity

### Deliverable 3: Compiler Integration & Basic UI
- Compiler event emissions (CompileBegin/CompileEnd)
- CompileErrorâ†’Diagnostic conversion
- RootStore wiring (EventHub, GraphCommitted emission)
- DiagnosticConsole React component

**Acceptance Criteria**: 5 criteria covering event emissions, UI updates, and display

## Scope Clarifications (From Ambiguity Resolution)

1. **Muting**: Removed for errors - errors always show in console
2. **Compile races**: Queue next compile (simplest approach)
3. **Runtime expiry**: Configurable time/count-based, default to no expiry
4. **Validator timing**: Immediate, no debounce (<10ms budget)
5. **TargetRef**: Hard IDs only, no semantic paths needed
6. **Multi-patch**: One DiagnosticHub per RootStore (clean isolation)
7. **Action idempotency**: Yes, actions must be idempotent

## Deferred to Sprint 2+

- Runtime diagnostics (NaN detection, performance monitoring)
- Bus warnings (empty buses, no publishers)
- Diagnostic actions/quick fixes
- UI badges on blocks/ports/buses
- Diagnostic grouping
- Advanced UI features

## Estimated Effort

**Sprint 1**: 40-50 hours for P0 deliverables

## Next Step

Proceed to implementation using `/do:it diagnostics-system`
