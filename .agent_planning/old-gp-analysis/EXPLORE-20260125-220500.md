# Explore Output: Gap Analysis — C-9 Blocker Assessment
Timestamp: 2026-01-25T22:05:00Z

## Files Examined

### Planning Files
- `.agent_planning/gap-analysis/SUMMARY.md` — master gap-analysis summary
- `.agent_planning/gap-analysis/SPRINT-20260124-190000-p2-blocked-PLAN.md` — sprint plan
- `.agent_planning/gap-analysis/critical/topic-06-renderer.md` — C-9 and C-12 details
- `.agent_planning/gap-analysis/EVALUATION-20260125-210000.md` — most recent prior evaluation
- `.agent_planning/render-pipeline-debt/EVALUATION-20260124-042900.md` — ms5 epic evaluation (dependency chain)

### Source Files
- `src/runtime/ScheduleExecutor.ts` — executeFrame function (lines 280-315)
- `src/runtime/RenderAssembler.ts` — v1 assembleRenderPass + v2 assembleRenderFrame_v2
- `src/render/Canvas2DRenderer.ts` — v1 renderPass + v2 renderFrameV2
- `src/render/SVGRenderer.ts` — v1 renderV1 + v2 render
- `src/render/future-types.ts` — DrawPathInstancesOp, DrawPrimitiveInstancesOp, RenderFrameIR_Future

### Beads
- `.beads/issues.jsonl:125` — ms5.8 issue entry

## Key Findings

### 1. ScheduleExecutor only calls v1 path
- Line 310: `const pass = assembleRenderPass(step, assemblerContext);`
- No call to `assembleRenderFrame_v2` or `assembleDrawPathInstancesOp` anywhere in executeFrame
- Import at line 23: only `assembleRenderPass` is imported

### 2. v2 Assembly Path is Complete
- `assembleRenderFrame_v2()` at line 1219 — iterates steps, calls assembleDrawPathInstancesOp
- `assembleDrawPathInstancesOp()` handles both path and primitive topologies
- rotation/scale2 properly wired in v2 path (lines 795-836)
- Returns `RenderFrameIR_Future` with DrawOp[]

### 3. Canvas2DRenderer v2 Support: COMPLETE
- `renderFrameV2()` at line 343 — handles both drawPathInstances and drawPrimitiveInstances
- `renderDrawPathInstancesOp()` at line 371 — full path rendering with transforms
- `renderDrawPrimitiveInstancesOp()` at line 493 — primitive rendering

### 4. SVGRenderer v2 Support: INCOMPLETE
- `render()` at line 202 — only handles `drawPathInstances`, NO `drawPrimitiveInstances`
- No `renderDrawPrimitiveInstancesOp` method exists in SVGRenderer
- Silent skip: primitives simply aren't rendered in SVG v2 path

### 5. ms5 Dependency Chain Status
Per render-pipeline-debt evaluation:
- ms5.4 (OutputSpecIR wiring): DONE (commit 99913ac)
- ms5.5 (dead render blocks): DONE (commit dac2f95)
- ms5.7 (DrawPrimitiveInstancesOp): DONE (commits 2a84fd1, 38f4b73, efb4d6e)
- ms5.15 (rotation/scale2): DONE (commit c7206be, tracked as C-13)
- ms5.8 (v1->v2 migration): NOT STARTED — all blockers now resolved

### 6. Dual Code Paths (Technical Debt)
Current state: v1 and v2 paths BOTH exist and are fully tested independently.
- v1: ScheduleExecutor → assembleRenderPass → RenderPassIR → renderPass/renderV1
- v2: (not wired) → assembleRenderFrame_v2 → RenderFrameIR_Future → renderFrameV2/render

### 7. Test Suite
- 1284/1284 pass
- v2 tests exercise assembleRenderFrame_v2 and assembleDrawPathInstancesOp directly
- Canvas2D v2 rendering tested in stroke-rendering.test.ts
- SVG v2 rendering tested in SVGRenderer.test.ts (but only for DrawPathInstancesOp)

## Test Count
```
Test Files  82 passed (82)
Tests       1284 passed (1284)
Duration    9.63s
```
