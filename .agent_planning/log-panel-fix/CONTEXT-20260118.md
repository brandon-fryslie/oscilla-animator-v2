# Log Panel Fix - Context

**Date**: 2026-01-18
**Topic**: log-panel-fix
**Status**: Planning

## Problem Statement

The LogPanel component exists in the codebase (`src/ui/components/app/LogPanel.tsx`) but is not displaying anywhere in the UI. According to the planning documents, it should be a tab in the bottom area next to the diagnostics panel.

## Current State

### What Exists

1. **LogPanel Component** (`src/ui/components/app/LogPanel.tsx`)
   - Functional React component using MobX observer
   - Displays logs from `rootStore.diagnostics.logs`
   - Has auto-scroll functionality
   - Properly styled with monospace font
   - Color-codes log levels (error=red, warn=yellow, info=blue)

2. **DiagnosticConsole Panel** (`src/ui/dockview/panels/DiagnosticConsolePanel.tsx`)
   - Currently the only bottom panel
   - Registered in `PANEL_DEFINITIONS` as `'diagnostic-console'`
   - Positioned in `'bottom-left'` group

3. **Panel Registry** (`src/ui/dockview/panelRegistry.ts`)
   - Contains `PANEL_DEFINITIONS` array
   - Contains `PANEL_COMPONENTS` object
   - **MISSING**: LogPanel is not registered here

4. **Default Layout** (`src/ui/dockview/defaultLayout.ts`)
   - Creates bottom-left and bottom-right groups
   - Only adds diagnostics panel to bottom-left
   - bottom-right group is intentionally left empty
   - **MISSING**: LogPanel is not added to any group

### What's Missing

1. **No Dockview Panel Wrapper**: Need to create `src/ui/dockview/panels/LogPanel.tsx` wrapper (following the pattern of DiagnosticConsolePanel)

2. **Not Registered**: LogPanel is not in `PANEL_DEFINITIONS` or `PANEL_COMPONENTS`

3. **Not in Layout**: LogPanel is not added to any group in `createDefaultLayout()`

## Historical Context

From planning documents:

- **ui-framework** (completed 2026-01-09):
  - DOD mentioned "Bottom log panel (resizable height, collapsible)"
  - Evaluation listed "log panel" as one of the UI components

- **ui-react-consolidation** (2026-01-10):
  - DOD included "Bottom log panel is React"
  - Plan mentioned "Bottom log panel"

The LogPanel component was created during the React UI consolidation, but the integration into the Dockview layout system was never completed.

## Architecture Notes

### Panel System Pattern

All panels in the Dockview system follow this pattern:

1. **Component**: Core React component in `src/ui/components/`
2. **Panel Wrapper**: Dockview wrapper in `src/ui/dockview/panels/` that implements `IDockviewPanelProps`
3. **Registration**: Entry in `PANEL_DEFINITIONS` and `PANEL_COMPONENTS`
4. **Layout**: Added to appropriate group in `createDefaultLayout()`

### Bottom Area Layout

Current structure:
```
+-------------------------------------------+
| bottom-left      | bottom-right           |
| (Diagnostics)    | (empty)                |
+-------------------------------------------+
```

Desired structure:
```
+-------------------------------------------+
| bottom-left                               |
| [Console] [Logs]  <- tabs                 |
+-------------------------------------------+
```

The bottom-left group should have both Diagnostics and Logs as tabs within the same group.

## Related Files

- `/Users/bmf/code/oscilla-animator-v2/src/ui/components/app/LogPanel.tsx` - Core component (exists)
- `/Users/bmf/code/oscilla-animator-v2/src/ui/dockview/panels/DiagnosticConsolePanel.tsx` - Reference pattern
- `/Users/bmf/code/oscilla-animator-v2/src/ui/dockview/panelRegistry.ts` - Needs update
- `/Users/bmf/code/oscilla-animator-v2/src/ui/dockview/defaultLayout.ts` - Needs update

## Constraints

1. **Single Source of Truth**: Panel definitions in `panelRegistry.ts`
2. **Follow Existing Pattern**: Use same wrapper pattern as other panels
3. **Group Placement**: Add to `'bottom-left'` group alongside diagnostics
4. **Tab Order**: Logs should appear after Console in tab order
