# Definition of Done: TimeRoot Complete Outputs

**Generated:** 2026-01-12
**Topic:** time-model

---

## Overall Acceptance

Work is NOT complete unless ALL criteria are met:

### P0: Palette and Energy Outputs

- [ ] TimeRoot blocks (InfiniteTimeRoot, FiniteTimeRoot) have `palette` output port
- [ ] TimeRoot blocks have `energy` output port
- [ ] `palette` output type is `signalTypeSignal('color')`
- [ ] `energy` output type is `signalTypeSignal('float')`
- [ ] pass3-time.ts generates `palette` and `energy` in TimeSignals
- [ ] timeResolution.ts computes palette as HSV(phaseA, 1.0, 0.5) → RGB
- [ ] timeResolution.ts computes energy as 0.5 + 0.5 * sin(phaseA * 2π)
- [ ] SignalEvaluator evaluates 'palette' and 'energy' cases
- [ ] All existing tests pass

### P1: Independent Period Configuration

- [ ] TimeRoot blocks have `periodAMs` parameter (default: 1000)
- [ ] TimeRoot blocks have `periodBMs` parameter (default: 2000)
- [ ] Old `periodMs` parameter removed or aliased
- [ ] pass3-time.ts extracts both periods to TimeModel
- [ ] phaseA cycles at periodAMs rate
- [ ] phaseB cycles at periodBMs rate
- [ ] Tests verify independent phase cycling

### P2: Phase PayloadType Correction

- [ ] phaseA output uses PayloadType 'phase'
- [ ] phaseB output uses PayloadType 'phase'
- [ ] No type errors from phase↔float connections
- [ ] No test regressions

---

## Test Requirements

### New Tests

- [ ] Test palette computation: phaseA=0 → red, phaseA=0.33 → green, phaseA=0.66 → blue
- [ ] Test energy computation: phaseA=0 → 0.5, phaseA=0.25 → 1.0, phaseA=0.75 → 0.0
- [ ] Test independent periods: periodAMs=1000, periodBMs=2000 → phaseB cycles at half rate

### Existing Tests

- [ ] All 273+ existing tests pass
- [ ] No TypeScript errors
- [ ] Build succeeds

---

## Verification Command

```bash
npm run typecheck && npm run build && npm test
```

Success: 0 TypeScript errors, build completes, all tests pass.
