# Phase 1 Remaining Work: Implementation Evaluation

**Generated**: 2026-01-09T21:00:00Z
**Spec Reference**: `design-docs/CANONICAL-oscilla-v2.5-20260109/`

---

## Summary: Implementation State by Topic

| Topic | State | Completion | Critical Gaps | Dependencies Met |
|-------|-------|------------|---------------|-----------------|
| **ir-5-axes** | PLANNING | ~25% | Schema, passes 5-8, runtime | type-system (DONE) |
| **type-system** | PROPOSED | ~90% | IR integration, axes bridging | None (autonomous) |
| **time-model** | PROPOSED | ~70% | TimeModel enum, phase wrap | type-system (DONE) |
| **buses-and-rails** | PROPOSED | ~10% | Multi-writer combine, semantics | type-system, compilation |
| **compilation-pipeline** | PROPOSED | ~40% | Passes 5-8, block lowering | type-system (DONE) |
| **runtime-execution** | PROPOSED | ~50% | Offset addressing, schedule | ir-5-axes, compilation |
| **primitives-catalog** | PROPOSED | ~35% | Basic 12, composites | compilation |

---

## Detailed Topic Analysis

### 1. ir-5-axes (PLANNING - Approved Plan Exists)

**What Exists:**
- `src/core/canonical-types.ts` - Complete 5-axis type system (522 lines)
- `src/compiler/ir/program.ts` - CompiledProgramIR schema defined
- Block registry with LowerContext patterns
- 25 blocks migrated to SignalType system
- 68 tests passing

**What's Missing:**
- Pass 5-6: Block lowering by execution class (signal/field/event)
- Pass 7: Schedule construction with phase ordering
- Pass 8: Slot offset computation
- Pass 9-10: DebugIndexIR implementation
- Runtime integration of offset-based addressing
- Axes bridging functions (`bridgeExtentToAxesDescIR`)

**Blocker Status:** Blocks compilation-pipeline, runtime-execution

---

### 2. type-system (PROPOSED - ~90% Complete)

**What Exists:**
- Complete 5-axis system in `src/core/canonical-types.ts`:
  - PayloadType: float, int, vec2, color, phase, bool, unit
  - AxisTag pattern for default/instantiated
  - Cardinality: zero/one/many(domain)
  - Temporality: continuous/discrete
  - Extent unification with strict join rules
- Type helpers: `sigType()`, `fieldType()`, `scalarType()`
- 52 tests covering axis combinations

**What's Missing:**
- AxesDescIR integration in IR schema
- Bridge function `bridgeExtentToAxesDescIR()`
- Axes on SlotMetaEntry (structure exists but not populated)

**Blocker Status:** Foundation complete; minor integration work

---

### 3. time-model (PROPOSED - ~70% Complete)

**What Exists:**
- `src/runtime/timeResolution.ts` - Complete time resolution
- EffectiveTime: tAbsMs, tModelMs, dt, phase, pulse, progress, energy
- TimeRoot blocks: InfiniteTimeRoot, FiniteTimeRoot
- TimeModel union: finite | cyclic | infinite

**What's Missing:**
- TimeModel not exposed in CompiledProgramIR
- Phase wrapping system incomplete
- tMs vs t semantics mismatch (spec: ms, impl: seconds)
- Rails concept not yet modeled

**Blocker Status:** Depends on type-system (DONE)

---

### 4. buses-and-rails (PROPOSED - ~10% Complete)

**What Exists:**
- Graph normalization treats buses as derived blocks
- CombineMode enum: last, first, sum, average, max, min
- Port multiplicity supported in graph structure

**What's Missing:**
- Multi-writer combine implementation
- Combine block insertion in compiler
- Bus block definitions (BusAdd, BusConcat, etc.)
- Rail topology tracking
- Default source materialization

**Blocker Status:** Depends on type-system (DONE), compilation-pipeline (passes 1-4)

---

### 5. compilation-pipeline (PROPOSED - ~40% Complete)

**What Exists:**
- Pass 0: Graph validation
- Pass 1: Normalization → NormalizedPatch
- Pass 2: Type assignment → TypedPatch
- Pass 3: Time topology → TimeResolvedPatch
- Pass 4: Dependency graph
- Pass 5: SCC/cycle detection
- Pass 6: Block lowering (partial)

**What's Missing:**
- Pass 5-6: Execution class assignment by extent
- Pass 7: Schedule building (completely absent)
- Pass 8: Slot offset planning
- Pass 9-10: Codegen and DebugIndexIR
- Error collection (currently stops at first error)

**Blocker Status:** Depends on ir-5-axes schema foundation

---

### 6. runtime-execution (PROPOSED - ~50% Complete)

**What Exists:**
- `RuntimeState.ts` - Frame state with ValueStore, FrameCache
- `ScheduleExecutor.ts` - Execute schedule steps
- `SignalEvaluator.ts` - Signal expression evaluation
- `Materializer.ts` - Field materialization
- Steel-thread test passes (basic particle animation)

**What's Missing:**
- Offset-based slot addressing not used
- Phase ordering not enforced in schedule execution
- State persistence across hot swap
- Hot swap implementation
- Performance measurement/validation

**Blocker Status:** Depends on ir-5-axes, compilation-pipeline

---

### 7. primitives-catalog (PROPOSED - ~35% Complete)

**What Exists:** ~30 block definitions:
- Signal: ConstFloat, AddSignal, MulSignal, Oscillator, MousePosition
- Time: InfiniteTimeRoot, FiniteTimeRoot
- Domain: DomainN, GridDomain, FieldBroadcast, FieldMap
- Render: FieldHueFromPhase, RenderInstances2D, ~10 field transforms

**What's Missing:**
- Complete arithmetic set (Div, Mod, trig functions)
- Stateful primitives integration (Lag, SampleAndHold, Phasor)
- Composite library
- Per-block unit tests

**Blocker Status:** Depends on compilation-pipeline

---

## Dependency Graph

```
type-system [DONE] ────┬─> ir-5-axes [PLANNING]
                       │       └──> compilation-pipeline
                       │            └──> runtime-execution
                       └─> time-model
                            ├──> buses-and-rails
                            └──> compilation-pipeline

compilation-pipeline ──> primitives-catalog
buses-and-rails ───────> primitives-catalog (optional)
```

---

## Critical Path to Phase 1 Completion

1. **ir-5-axes** - Schema + passes 5-8 (APPROVED, ready to execute)
2. **compilation-pipeline** - Complete passes 5-10
3. **runtime-execution** - Offset addressing + schedule execution
4. **buses-and-rails** - Combine blocks + multi-writer logic
5. **primitives-catalog** - Complete Basic 12 + composites

---

## Verdict: CONTINUE

The ir-5-axes plan is approved and ready for execution. Type-system foundation is solid.
All remaining topics can be planned with certainty.
