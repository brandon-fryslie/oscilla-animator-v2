# Definition of Done - Deduplication & Cleanup Sprint 1

## Work Item Acceptance Criteria

### P0: bridge.ts deleted
- [ ] File `/src/compiler/ir/bridge.ts` does not exist
- [ ] `npm run typecheck` passes
- [ ] No "bridge" imports remain in codebase (excluding `bridges.ts`)

### P1: Viewer module deleted
- [ ] Directory `/src/viewer/` does not exist
- [ ] `npm run typecheck` passes

### P2: Debug console statements removed
- [ ] DiagnosticHub.ts: Zero `console.log` statements in handleCompileEnd method
- [ ] pass7-schedule.ts: Zero `console.warn` statements in createRenderSteps function
- [ ] pass6-block-lowering.ts: Zero `console.debug` statement in lowerBlock function
- [ ] `npm run typecheck` passes

### P3: Type compatibility validation restored
- [ ] When multiple writers target an input, their SignalTypes are validated for compatibility
- [ ] Incompatible time axes produce a `PortTypeMismatch` error with clear message
- [ ] Validation uses `validateCombineMode` from combine-utils.ts
- [ ] Tests verify that incompatible writers are rejected
- [ ] The commented-out block (pass6 lines 112-129) is removed and replaced with working code

### P4: Pipeline placeholders resolved
- [ ] pass8LinkResolution: Either implemented OR explicitly documented as not-needed-yet
- [ ] convertLinkedIRToProgram: Either implemented OR stub renamed to real implementation
- [ ] No misleading "TODO: Implement" comments remain in compile.ts
- [ ] If deferred, clear documentation of why and when it will be needed

---

## Sprint Complete Criteria

- [ ] All 5 work items pass their acceptance criteria
- [ ] `npm run test` passes (full test suite)
- [ ] `npm run build` succeeds
- [ ] No misleading TODOs remain in modified files
- [ ] Git status shows expected changes only
