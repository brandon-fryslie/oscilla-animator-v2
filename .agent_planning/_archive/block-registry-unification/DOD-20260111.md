# Definition of Done: Block Registry Unification

**Generated:** 2026-01-11

## Acceptance Criteria

### Must Pass (All Required)

- [ ] **ONE BlockDef type** exists in `src/blocks/registry.ts` with all fields (metadata + lowering)
- [ ] **ONE registerBlock() function** exists and blocks call it exactly once
- [ ] **ZERO duplicate registries** - no `src/compiler/blocks/registry.ts`, no `src/compiler/ir/lowerTypes.ts` registry
- [ ] **ZERO imports from deleted files** - no imports from `src/compiler/blocks/`, `src/ui/registry/blockTypes.ts`
- [ ] **Build succeeds** - `npm run build` exits with code 0
- [ ] **Tests pass** - `npm run test` exits with code 0
- [ ] **App loads** - no console errors on startup

### Verification Commands

```bash
# Build check
npm run build

# Test check
npm run test

# No duplicate registries check
grep -r "registerBlock" src/ | grep -v ".test." | grep -v "node_modules" | sort

# No imports from deleted files
grep -r "from.*compiler/blocks" src/ --include="*.ts" --include="*.tsx" | grep -v "ir/" | grep -v ".test."
grep -r "from.*ui/registry/blockTypes" src/ --include="*.ts" --include="*.tsx"
```

### Structural Verification

After completion, this should be the ONLY block registration pattern:

```typescript
// In src/blocks/some-blocks.ts
import { registerBlock } from './registry';

registerBlock({
  type: 'BlockTypeName',
  label: 'Human Label',
  category: 'category',
  form: 'primitive',
  capability: 'pure',
  inputs: [...],
  outputs: [...],
  params: {...},
  lower: (args) => { /* IR lowering */ }
});
```

No other registration pattern should exist anywhere in the codebase.
