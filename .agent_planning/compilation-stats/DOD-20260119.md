# Definition of Done: Compilation Statistics

**Date:** 2026-01-19
**Feature:** Per-session compilation statistics

---

## Functional Acceptance Criteria

### AC1: Statistics Tracking
- [ ] Count: Tracks total successful compilations
- [ ] Last: Shows most recent compile duration
- [ ] Avg: Calculates average (total / count)
- [ ] Med: Calculates median of last 20 compiles
- [ ] Min: Tracks fastest compile time
- [ ] Max: Tracks slowest compile time

### AC2: UI Display
- [ ] Stats displayed in Diagnostics Console tab
- [ ] Stats line visible at top of console
- [ ] Format: `Compilations: N | Last: X.Xms | Avg: X.Xms | Med: X.Xms | Min: X.Xms | Max: X.Xms`
- [ ] Monospace font for alignment
- [ ] Muted color (secondary text)
- [ ] Hidden when count is 0

### AC3: Reactivity
- [ ] Stats update immediately after each compilation
- [ ] No manual refresh required
- [ ] MobX observer pattern used

### AC4: Session Scope
- [ ] Stats reset on page refresh
- [ ] No localStorage persistence
- [ ] Fresh start each session

---

## Code Quality Criteria

### CQ1: TypeScript
- [ ] No compilation errors
- [ ] CompilationStats interface properly typed
- [ ] Computed properties type-safe

### CQ2: MobX Patterns
- [ ] Observable state for compilationStats
- [ ] Computed for derived values (avg, median, last)
- [ ] Action for recordCompilation mutation
- [ ] Observer wrapper on UI component

### CQ3: Performance
- [ ] O(1) recording (push, min/max)
- [ ] O(n log n) median (sort of 20 items max)
- [ ] No memory leaks (bounded array size)

---

## Testing Criteria

### TC1: Manual Verification
- [ ] Initial load shows stats after first compile
- [ ] Parameter changes trigger updates
- [ ] Min tracks correctly (smallest value)
- [ ] Max tracks correctly (largest value)
- [ ] Median stabilizes after ~20 compiles
- [ ] Page refresh resets stats

### TC2: Edge Cases
- [ ] Zero compiles: Stats bar hidden
- [ ] One compile: All stats show same value
- [ ] Rapid compiles: No missed updates

---

## Definition of COMPLETE

All acceptance criteria checked:
- [ ] AC1: Statistics tracking
- [ ] AC2: UI display
- [ ] AC3: Reactivity
- [ ] AC4: Session scope
- [ ] CQ1-CQ3: Code quality
- [ ] TC1-TC2: Testing

---

## Sign-Off

- [ ] Build passes
- [ ] Manual verification complete
- [ ] Committed to git
