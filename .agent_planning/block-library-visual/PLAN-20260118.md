# Block Library Visual Redesign Plan

**Created:** 2026-01-18
**Goal:** Make the block library look excellent visually
**Status:** PLANNING

## Current State Analysis

The block library currently has functional but basic styling:
- Plain text listing with no distinctive icons
- Simple category headers with just text and collapse arrows
- No visual distinction between different block types or capabilities
- Basic search input without polish
- Emoji placeholder (ğŸ“¦) mentioned in code but not visible in render
- No indication of block capabilities (inputs/outputs count, capability type)

### What Works
- Dark theme colors are consistent with the app
- Collapse/expand functionality works
- Search filtering works
- Click to preview, double-click to add works

### What Needs Improvement
1. **Block items lack visual hierarchy** - everything looks the same
2. **No category theming** - all categories look identical
3. **Missing capability indicators** - users can't see at a glance what blocks do
4. **Search box is utilitarian** - could be more polished
5. **No visual affordances** - not obvious items are interactive

## Design Principles

1. **Category-based color coding** - Each category gets a subtle accent color
2. **Capability badges** - Show form (primitive/macro) and capability type
3. **Port indicators** - Show input/output count at a glance
4. **Consistent with app theme** - Use existing color palette, don't introduce new colors
5. **Scannable** - Easy to quickly find what you're looking for
6. **Delightful details** - Subtle animations, proper hover states

## Visual Design Specification

### Category Colors (derived from existing palette)

| Category | Accent Color | Rationale |
|----------|-------------|-----------|
| signal | `#4ecdc4` (primary teal) | Core/fundamental |
| math | `#f9a826` (warm amber) | Computational |
| color | `#ff6b6b` (red) | Visual/creative |
| geometry | `#9b59b6` (purple) | Spatial |
| field | `#3498db` (blue) | Data operations |
| layout | `#2ecc71` (green) | Arrangement |
| instance | `#e67e22` (orange) | Instantiation |
| render | `#e91e63` (pink) | Output/display |
| domain | `#607d8b` (blue-grey) | System/identity |
| shape | `#00bcd4` (cyan) | Drawing primitives |

### Block Item Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‰  Constant                    [P] â”‚
â”‚    signal Â· 0â†’1                     â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚    Outputs a constant value         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Components:
- **Icon dot** (â—‰): Colored by category
- **Label**: Bold, primary text color
- **Capability badge** [P]: Primitive, [M]: Macro
- **Type + ports**: `category Â· inputsâ†’outputs`
- **Description**: Truncated to 1-2 lines, muted color

### Category Header Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— signal                         5 â”‚
â”‚   â””â”€ â– accent border                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Components:
- **Category dot**: Filled circle in category color
- **Category name**: Capitalized, semi-bold
- **Count badge**: Pill showing number of blocks
- **Accent border**: 2px left border in category color when expanded

### Search Box Enhancements

- Search icon (ğŸ”) prefix
- Clear button (Ã—) on right when text entered
- Focus ring in primary color
- Results count badge during search

### Hover/Selected States

- **Hover**: Subtle background lift + border highlight
- **Selected**: Stronger background + category accent border
- **Transition**: 150ms ease for all state changes

## Implementation Plan

### Phase 1: Category Colors & Structure (CSS)

**Files to modify:**
- `src/ui/components/BlockLibrary.css`

**Changes:**
1. Add CSS custom properties for category colors
2. Update `.block-category__header` with colored dot and left border
3. Style category count badge with category color tint
4. Add transition effects

### Phase 2: Block Item Visual Upgrade (CSS + TSX)

**Files to modify:**
- `src/ui/components/BlockLibrary.tsx`
- `src/ui/components/BlockLibrary.css`

**Changes:**
1. Add category color dot icon
2. Add capability badge component
3. Add port count indicator (`inputsâ†’outputs`)
4. Add description display (truncated)
5. Style hover/selected states with category accent

### Phase 3: Search Polish (CSS)

**Files to modify:**
- `src/ui/components/BlockLibrary.css`

**Changes:**
1. Add search icon
2. Improve focus states
3. Add result count styling
4. Animate clear button

### Phase 4: Interaction Refinements

**Files to modify:**
- `src/ui/components/BlockLibrary.tsx`
- `src/ui/components/BlockLibrary.css`

**Changes:**
1. Add keyboard focus indicators
2. Improve selected state visuals
3. Add subtle entrance animations for search results
4. Ensure proper ARIA attributes

## Technical Notes

### CSS Custom Properties for Category Colors

```css
:root {
  --category-signal: #4ecdc4;
  --category-math: #f9a826;
  --category-color: #ff6b6b;
  --category-geometry: #9b59b6;
  --category-field: #3498db;
  --category-layout: #2ecc71;
  --category-instance: #e67e22;
  --category-render: #e91e63;
  --category-domain: #607d8b;
  --category-shape: #00bcd4;
}
```

### Category Color Helper (TypeScript)

```typescript
const categoryColors: Record<string, string> = {
  signal: '#4ecdc4',
  math: '#f9a826',
  color: '#ff6b6b',
  geometry: '#9b59b6',
  field: '#3498db',
  layout: '#2ecc71',
  instance: '#e67e22',
  render: '#e91e63',
  domain: '#607d8b',
  shape: '#00bcd4',
};

function getCategoryColor(category: string): string {
  return categoryColors[category] || '#888888';
}
```

## Definition of Done

1. [ ] Category headers have colored dots and accent borders
2. [ ] Block items show category-colored icons
3. [ ] Block items display capability badges (P/M)
4. [ ] Block items show port counts (inputsâ†’outputs)
5. [ ] Block items show truncated descriptions
6. [ ] Hover states provide clear visual feedback
7. [ ] Search box has icon and polished styling
8. [ ] All colors derive from existing palette or complement it
9. [ ] Transitions are smooth (150ms)
10. [ ] Visual hierarchy is clear and scannable
11. [ ] No console errors or warnings
12. [ ] Works in current browser viewport

## Verification

After implementation:
1. Take screenshot and compare to design spec
2. Verify all categories have distinct colors
3. Test hover/focus states
4. Test search filtering preserves styling
5. Test collapse/expand preserves state
6. Verify no performance regression (should be imperceptible)

## Risk Assessment

| Risk | Mitigation |
|------|------------|
| CSS specificity conflicts | Use BEM naming, check existing classes |
| Color accessibility | Ensure sufficient contrast ratios |
| Performance from many elements | CSS-only where possible, no JS for styling |
| Breaking existing functionality | Test click/double-click after changes |
