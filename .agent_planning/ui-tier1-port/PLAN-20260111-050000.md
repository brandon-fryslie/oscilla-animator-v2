# UI Tier 1 - BlockLibrary and CSS Styling: Implementation Plan

**Sprint Goal**: Port v1 BlockLibrary component and CSS styling to v2 with canonical type alignment and simplified architecture.

**Scope**: BlockLibrary component adaptation (remove lanes, simplify grouping), CSS porting and theme alignment.

**Deferred to Later Phases**: Drag-drop integration (dnd-kit), composite support, block color metadata, subcategory support.

---

## Sprint Deliverables

### Deliverable 1: BlockLibrary Component Simplification

**Overview**: Adapt the existing v2 BlockLibrary (279 LOC) from v1's comprehensive implementation (416 LOC) by removing lane-based filtering, simplifying the category grouping (no form tiers), and enhancing the UI with better interaction patterns.

**Files to Modify**:
- `/Users/bmf/code/oscilla-animator-v2/src/ui/components/BlockLibrary.tsx` - Already exists, needs enhancement

**Acceptance Criteria**: See DOD-20260111-050000.md Deliverable 1 (8 criteria)

**Key Enhancements**:
1. Remove any lane logic (already clean in v2)
2. Add search debouncing (150ms), clear button, result count
3. Add category collapse persistence (localStorage)
4. Enhance port metadata display
5. Add keyboard navigation (arrows, Enter, Shift+Enter, ESC)

---

### Deliverable 2: CSS Styling Port and Theme Alignment

**Overview**: Create `BlockLibrary.css` from v1's 354-line CSS file, simplifying the tier-subcategory nesting to category-only layout while maintaining visual consistency with v2's dark theme.

**Files to Create**:
- `/Users/bmf/code/oscilla-animator-v2/src/ui/components/BlockLibrary.css`

**Acceptance Criteria**: See DOD-20260111-050000.md Deliverable 2 (6 criteria)

**Key Changes**:
1. Map v1 colors to v2 palette (bgContent, bgPanel, border, primary, text colors)
2. Simplify category structure (remove tier/subcategory nesting)
3. Remove drag-drop specific styles (defer to Phase 2)
4. Match InspectorContainer scrollbar styling
5. Update typography to v2 standards

---

## Implementation Sequence

1. **Day 1**: CSS Porting
   - Create BlockLibrary.css from v1
   - Map colors to v2 palette
   - Test visual consistency

2. **Day 2**: Component Enhancement
   - Add search enhancements (debounce, clear, count)
   - Add category collapse persistence
   - Add keyboard navigation

3. **Day 3**: Testing & Polish
   - Unit tests (search, interactions, persistence)
   - Integration tests (store integration)
   - Visual regression verification

---

## Dependencies (All Exist ✅)

- ✅ RootStore with patch and selection stores
- ✅ PatchStore.addBlock(type, params)
- ✅ SelectionStore.setPreviewType(type)
- ✅ Block registry with categories
- ✅ BlockTypeInfo interface

---

## Success Metrics

- ✅ All 14 acceptance criteria met
- ✅ TypeScript strict mode, zero errors
- ✅ Test coverage >80%
- ✅ Search response <50ms for 50 blocks
- ✅ Visual consistency with InspectorContainer
