Agent: iterative-implementer | 2026-01-11 15:24:00
Mode: manual
Completed: Fixed Edge/NormalizedEdge type mismatch in resolveWriters | Files: 2 | Commits: 1
Cache invalidated: None (compiler changes don't affect runtime caches)
Status: complete

## Problem Fixed
The resolveWriters.ts module was using the legacy Edge type but the compilation
pipeline now uses NormalizedEdge (with block indices instead of IDs).

## Solution
Updated resolveWriters.ts and pass6-block-lowering.ts to work with NormalizedEdge:
- enumerateWriters() now accepts NormalizedEdge[] + blocks[]
- Added index<->ID mapping logic to convert between formats
- Updated pass6-block-lowering to pass blocks array through

## Verification
Before fix: "No writers for required input b1.phase"
After fix: Tests progress past edge resolution, now fail on unrelated IRBuilder
API issues (sigCall, getDomains methods missing)

This confirms the edge type mismatch is resolved. Remaining test failures are
pre-existing issues unrelated to this fix.

## Files Modified
- src/compiler/passes-v2/resolveWriters.ts
- src/compiler/passes-v2/pass6-block-lowering.ts

## Commit
55bc002 - fix(compiler): update resolveWriters to use NormalizedEdge
