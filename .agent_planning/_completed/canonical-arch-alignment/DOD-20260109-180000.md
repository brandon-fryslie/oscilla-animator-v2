# Definition of Done: Canonical Architecture Type System Alignment

Generated: 2026-01-09T18:00:00Z

## P0: Implement Canonical Type System Module

- [ ] `PayloadType` union type defined: `'float' | 'int' | 'vec2' | 'color' | 'phase' | 'bool' | 'unit'`
- [ ] `AxisTag<T>` discriminated union: `{ kind: 'default' } | { kind: 'instantiated'; value: T }`
- [ ] `Cardinality` type: `zero | one | many(domain)`
- [ ] `Temporality` type: `continuous | discrete`
- [ ] `Binding` type: `unbound | weak | strong | identity`
- [ ] `Extent` interface with all 5 axes
- [ ] `SignalType = { payload: PayloadType, extent: Extent }`
- [ ] `DEFAULTS_V0` constant with canonical defaults
- [ ] `DomainDecl` and `DomainRef` types
- [ ] All types use `readonly` and discriminated unions (no optional fields)

## P1: Write Canonical Type System Tests

- [ ] Test file: `src/core/__tests__/canonical-types.test.ts`
- [ ] Tests for `AxisTag` construction and type narrowing
- [ ] Tests for axis unification rules (4 cases)
- [ ] Tests for `SignalType` construction
- [ ] Tests for Worldâ†’Axes mapping
- [ ] Tests for `DEFAULTS_V0` values
- [ ] All tests pass

## P2: Fix Type Errors - Achieve Clean Typecheck

- [ ] `npm run typecheck` exits with code 0
- [ ] No `any` type assertions added to suppress errors
- [ ] All existing tests still pass (`npm run test`)
- [ ] TypeDesc construction uses helper functions

## Overall Sprint Completion

- [ ] All P0 criteria met
- [ ] All P1 criteria met
- [ ] All P2 criteria met
- [ ] Code follows spec naming conventions (kind discriminator, PascalCase types)
- [ ] No new technical debt introduced
