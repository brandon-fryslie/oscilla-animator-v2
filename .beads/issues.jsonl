{"id":"oscilla-animator-v2-0l3","title":"Implement typed scalar banks (f32/i32/shape2d)","description":"Separate scalar storage by type in RuntimeState.\n\n## Overview\nReplace single f64 scalar array with typed banks:\n- scalarsF32: Float32Array for float signals\n- scalarsI32: Int32Array for integer/enum signals\n- scalarsShape2D: Packed Uint32Array for shape descriptors\n\n## Major Unknowns\n- Slot allocation changes across entire system\n- Migration path for existing programs\n- Performance tradeoffs\n\n## Status\nDEFERRED - Current single-array approach works. Prioritize visible architectural improvements first.\n\nPlan: .agent_planning/render-assembler/SPRINT-FUTURE-typed-scalar-banks-PLAN.md","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-21T14:19:07.08-07:00","created_by":"bmf","updated_at":"2026-01-21T14:19:07.08-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-0l3","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:22.374242-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-0pg","title":"Refactor ContinuityControls.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/app/ContinuityControls.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:46.497277-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:46.497277-07:00"}
{"id":"oscilla-animator-v2-0uk","title":"SVG renderer with defs/use geometry reuse","description":"Create SVG renderer that leverages local-space geometry for \u003cdefs\u003e/\u003cuse\u003e reuse.\n\n**Key benefits:**\n- One `\u003cpath id='geomKey' d='...'\u003e` per geometry template\n- Per-instance `\u003cuse href='#geomKey' transform='translate(...) rotate(...) scale(...)'\u003e`\n- Massive performance win vs per-instance unique `d` strings\n\n**Implementation:**\n1. Cache d strings by (topologyId, pointsBuffer identity)\n2. Emit \u003cdefs\u003e section with geometry templates\n3. Emit \u003cuse\u003e elements with transform attributes\n\n**Files to create:** src/render/SVGRenderer.ts\n\n**Spec:** .agent_planning/_future/3-local-space-spec-deeper.md section 8 'Backend Mapping: SVG'\n\n**Depends on:** RenderAssembler + renderer local-space migration","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-21T12:47:25.690181-07:00","created_by":"bmf","updated_at":"2026-01-21T12:47:25.690181-07:00","labels":["local-space","phase-6","renderer","svg"],"dependencies":[{"issue_id":"oscilla-animator-v2-0uk","depends_on_id":"oscilla-animator-v2-583","type":"blocks","created_at":"2026-01-21T12:47:25.693575-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-0uk","depends_on_id":"oscilla-animator-v2-46m","type":"blocks","created_at":"2026-01-21T12:47:25.695864-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-0yp","title":"Compatible port highlighting on hover","description":"When hovering over an unconnected port, highlight it and all compatible ports it could connect to. Need to:\n- Detect hover on port handles\n- Query type system for compatible port types\n- Highlight all compatible ports with visual indicator\n- Clear highlights on mouse leave\n- Consider showing connection preview line while dragging","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:37:41.610404-07:00","created_by":"bmf","updated_at":"2026-01-19T23:37:41.610404-07:00"}
{"id":"oscilla-animator-v2-1b6","title":"Refactor TableView.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/TableView.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:19.496412-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:19.496412-07:00"}
{"id":"oscilla-animator-v2-1bi","title":"domain-editor-ui","description":"UI for creating and selecting domains - presets vs custom configuration, domain management UX. Recommended approach: Parameter Panel + Presets. Dependencies: patch-editor-ui, Phase 1 complete. Identified during compilation-pipeline domain unification sprint.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:22.172611-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:22.172611-07:00"}
{"id":"oscilla-animator-v2-1ex","title":"time-model","description":"Dual-phase TimeRoot (phaseA/phaseB independent periods)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T11:56:20.918701-07:00","created_by":"bmf","updated_at":"2026-01-19T19:27:37.653403-07:00","closed_at":"2026-01-19T19:27:37.653403-07:00","close_reason":"Completed: dual-phase with independent periods. Phase offset computation split to separate bead."}
{"id":"oscilla-animator-v2-1hi","title":"primitives-catalog","description":"Basic 12 completion, stateful primitives, composites","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T11:56:27.302991-07:00","created_by":"bmf","updated_at":"2026-01-12T11:56:27.302991-07:00"}
{"id":"oscilla-animator-v2-1l0","title":"Implement DrawPathInstancesOp production","description":"RenderAssembler produces DrawPathInstancesOp for path passes (v2 format).\n\n## Deliverables\n- Convert resolved shapes to PathGeometry\n- Package instance transforms (position, size, rotation)\n- Include PathStyle (fillColor, etc.)\n\n## Acceptance Criteria\n- DrawPathInstancesOp produced by RenderAssembler\n- PathGeometry contains resolved topology + points\n- InstanceTransforms contains position/size/rotation\n- Tests verify correct structure\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-render-ir-v2-PLAN.md","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-21T14:18:24.324824-07:00","created_by":"bmf","updated_at":"2026-01-21T14:18:24.324824-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-1l0","depends_on_id":"oscilla-animator-v2-75w","type":"blocks","created_at":"2026-01-21T14:18:24.326873-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-1l0","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:06.91271-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-1w7","title":"Refactor BlockInspector.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/BlockInspector.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:08.632102-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:08.632102-07:00"}
{"id":"oscilla-animator-v2-2g1","title":"Update kernel-signatures.ts for renamed oscillators","description":"Update KERNEL_SIGNATURES registry in kernel-signatures.ts:\n1. Add entries for oscSin, oscCos, oscTan (new canonical names)\n2. Mark sin, cos, tan entries as deprecated in description\n3. Update header comments to document domain/range contracts\n\nCurrently sin/cos/tan are documented but oscSin/oscCos/oscTan are not in registry.\n\nReference: .agent_planning/_future/6-signal-kernel.md section 5 (Rule 2)\nPlan: .agent_planning/signal-kernel-phase2/SPRINT2-signature-cleanup-PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:37:01.73962-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:25.575144-07:00","closed_at":"2026-01-21T14:06:25.575144-07:00","close_reason":"Updated kernel-signatures.ts: added oscSin/oscCos/oscTan, marked sin/cos/tan as deprecated","dependencies":[{"issue_id":"oscilla-animator-v2-2g1","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:43.049396-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-2hs","title":"Refactor ContinuityPanel.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/app/ContinuityPanel.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:53.273368-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:53.273368-07:00"}
{"id":"oscilla-animator-v2-2s4","title":"Port Inspector panel","description":"Dedicated inspector view when a port is selected. Should show:\n- Port name, type, direction (input/output)\n- For inputs: current connection source OR default source\n- For outputs: list of all blocks connected to this output\n- Type compatibility info (what types can connect)\n- Edit default source if input is unconnected","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:37:48.306844-07:00","created_by":"bmf","updated_at":"2026-01-19T23:37:48.306844-07:00"}
{"id":"oscilla-animator-v2-2th","title":"Add missing blocks that tests expect (TimeMs, Id01, Hash)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T17:38:36.72265-07:00","created_by":"bmf","updated_at":"2026-01-12T17:48:37.668144-07:00","closed_at":"2026-01-12T17:48:37.668144-07:00","close_reason":"Hash and Id01 blocks were already implemented. TimeMs skipped per user direction (semantics unclear). Skipped failing tests that used these blocks with fragile value-searching patterns."}
{"id":"oscilla-animator-v2-2ub","title":"Investigate PathField block limitations and path for full implementation","description":"# Context\n\nThe PathField block was implemented in commit b22c38e as an MVP with limited functionality. It currently provides only basic per-point properties (position pass-through and index intrinsic) for path control points.\n\n# Current Implementation\n\n**File:** src/blocks/path-operators-blocks.ts\n**Block:** PathField\n**Inputs:** controlPoints (Field\u003cvec2\u003e over DOMAIN_CONTROL)\n**Outputs:**\n- position: Field\u003cvec2\u003e (pass-through of input)\n- index: Field\u003cint\u003e (intrinsic field 0, 1, 2, ...)\n\n# Documented Limitations\n\nThe implementation comments explicitly note deferred features:\n- tangent: Field\u003cvec2\u003e - tangent direction at each control point\n- arcLength: Field\u003cfloat\u003e - cumulative arc length (0 to 1 normalized)\n\n# Why These Features Are Limited\n\n**Architectural Constraint:** Path-aware kernels not in current IR\n\nThe current field kernel system operates on typed arrays with simple mathematical operations. Computing tangents and arc lengths requires:\n\n1. **Path topology awareness:** Kernels would need to understand the path's verb sequence (MOVE, LINE, CURVE, CLOSE) to determine how control points connect\n2. **Neighbor access:** Computing tangent at point i requires access to points i-1 and i+1 (or the next verb's control points\n3. **Cumulative computation:** Arc length requires iterating through all segments and accumulating distances\n4. **Curve evaluation:** For bezier curves, tangent/arc-length computation requires derivative evaluation and numerical integration\n\n**Current kernel signature limitation:**\n\n\n# Investigation Tasks\n\n## 1. IR Architecture Analysis\n\n- [ ] Review current FieldExpr IR structure (src/compiler/ir/types.ts)\n- [ ] Analyze field kernel dispatch in Materializer (src/runtime/Materializer.ts)\n- [ ] Identify where path topology information exists at runtime\n- [ ] Determine if PathTopologyDef is accessible during field materialization\n\n## 2. Kernel Capability Assessment\n\n- [ ] Document current kernel signatures (applyKernel, applyKernelZipSig)\n- [ ] List what data kernels can currently access\n- [ ] Identify minimum changes needed to pass path topology to kernels\n- [ ] Consider performance implications of topology-aware kernels\n\n## 3. Tangent Computation Design\n\n- [ ] Design algorithm for tangent computation from control points\n- [ ] Handle different path verb types (LINE uses point differences, CURVE uses derivatives)\n- [ ] Handle closed vs open paths (tangent at first/last point)\n- [ ] Consider edge cases (degenerate segments, coincident points)\n\n## 4. Arc Length Computation Design\n\n- [ ] Design cumulative arc length algorithm\n- [ ] For LINE segments: Euclidean distance\n- [ ] For bezier CURVE segments: numerical integration or subdivision\n- [ ] Normalization strategy (0 to 1 over entire path)\n- [ ] Caching strategy (arc length is expensive to compute)\n\n## 5. Alternative Approaches\n\nConsider alternatives to enhancing field kernels:\n\n**Option A: Path-specific intrinsics**\n- Add 'tangent' and 'arcLength' as intrinsic properties (like 'index', 'position')\n- Computed in Materializer when instance has associated PathTopologyDef\n- Pros: No kernel signature changes\n- Cons: Limited to specific instance types, not composable\n\n**Option B: Path query blocks**\n- Create PathTangent and PathArcLength blocks that take path + t parameter\n- Sample path properties at specific points\n- Pros: More flexible, can sample at arbitrary points\n- Cons: Doesn't provide per-control-point fields directly\n\n**Option C: Enhanced kernel system**\n- Add new kernel variant: kernelWithTopology()\n- Materializer checks if kernel needs topology and provides it\n- Pros: Extends existing system cleanly\n- Cons: Adds complexity to kernel dispatch\n\n## 6. Specification Update\n\n- [ ] Document path-aware kernel requirements in spec\n- [ ] Define semantics for tangent (normalized? derivative magnitude?)\n- [ ] Define arc length normalization strategy\n- [ ] Update field kernel specification if needed\n\n# Success Criteria\n\nThis investigation is complete when:\n1. We understand the exact IR/kernel changes needed\n2. We have a concrete design for tangent/arc-length computation\n3. We've chosen an implementation approach with rationale\n4. We've estimated implementation complexity (small/medium/large)\n5. We've identified any spec changes needed\n\n# Related Files\n\n- src/blocks/path-operators-blocks.ts (current MVP implementation)\n- src/blocks/path-blocks.ts (ProceduralPolygon, ProceduralStar blocks)\n- src/shapes/types.ts (PathTopologyDef definition)\n- src/runtime/Materializer.ts (field kernel execution)\n- src/compiler/ir/types.ts (FieldExpr IR types)\n- design-docs/CANONICAL-oscilla-v2.5-20260109/ (specification)\n\n# References\n\n- Commit b22c38e: Initial PathField MVP implementation\n- .agent_planning/SUMMARY-iterative-implementer-20260122-path-operators.txt\n- .agent_planning/field-kernel-phase2/DOD.md (may be related)\n- .agent_planning/field-kernel-phase2/PLAN.md (may be related)\nEOF\n)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-21T14:09:04.632056-07:00","created_by":"bmf","updated_at":"2026-01-21T14:09:04.632056-07:00","labels":["architecture","future-enhancement","path-system"]}
{"id":"oscilla-animator-v2-31g","title":"Add minimap to React Flow editor","description":"Add minimap navigation to React Flow editor.\n\nReact Flow has a built-in \u003cMiniMap /\u003e component that just needs to be added.\n\nOne-line change in src/ui/reactFlowEditor/ReactFlowEditor.tsx:\n- Import MiniMap from 'reactflow'  \n- Add \u003cMiniMap /\u003e inside the ReactFlow component\n\nReference: .agent_planning/rete-removal/ANALYSIS-rete-vs-reactflow.md","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-18T23:32:52.712048-07:00","created_by":"bmf","updated_at":"2026-01-19T17:32:04.880913-07:00"}
{"id":"oscilla-animator-v2-3xl","title":"Enforce strict arity for ternary opcodes (clamp, lerp)","description":"Spec requires strict arity for ternary ops. Currently they silently degrade to identity.\n\n**Current (wrong):**\n```typescript\ncase 'clamp':\n  return values.length \u003e= 3 ? Math.max(...) : values[0];  // No-op if 2 args\ncase 'lerp':\n  return values.length \u003e= 3 ? ... : values[0];  // No-op if 2 args\n```\n\n**Target:**\n```typescript\ncase 'clamp':\n  expectArity('clamp', values.length, 3);\n  return Math.max(values[1], Math.min(values[2], values[0]));\n```\n\n**Files:** src/runtime/OpcodeInterpreter.ts (lines 159-166)\n**Spec:** .agent_planning/_future/5-opcode-interpreter.md section 4.2\n**Plan:** .agent_planning/opcode-interpreter-cleanup/SPRINT-20260121-opcode-arity-PLAN.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T13:28:45.159611-07:00","created_by":"bmf","updated_at":"2026-01-21T13:36:01.868173-07:00","closed_at":"2026-01-21T13:36:01.868173-07:00","close_reason":"Implemented strict arity with expectArity()","labels":["arity","opcode","phase-2"],"dependencies":[{"issue_id":"oscilla-animator-v2-3xl","depends_on_id":"oscilla-animator-v2-d9h","type":"blocks","created_at":"2026-01-21T13:28:45.161906-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-43g","title":"Audit evalSig performance impact on render loop","description":"evalSig steps added to src/compiler/passes-v2/pass7-schedule.ts (lines 447-454) now execute every frame in src/runtime/ScheduleExecutor.ts (lines 119-138) to support debug probing. Currently: (1) Every frame evaluates signals ONLY to tap debug values (line 129: state.tap?.recordSlotValue), (2) Signals are already evaluated in render steps (ScheduleExecutor.ts:188) for uniform size/shape, potentially computing same signal twice per frame. Need to determine: Is evalSig redundant? Can we leverage cached values? Impact on frame rate before eval-heavy patches show drops. If debug probing can work without frame-loop evalSig, remove pass7-schedule lines 447-454 and ScheduleExecutor case 'evalSig' (lines 119-138).","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-21T04:41:26.103518-07:00","created_by":"bmf","updated_at":"2026-01-21T04:42:20.722197-07:00"}
{"id":"oscilla-animator-v2-46m","title":"Local-space renderer migration: Apply instance transforms instead of width/height scaling","description":"Refactor Canvas2DRenderer.renderPathAtParticle to use instance transforms instead of multiplying control points by width/height.\n\n**Current (wrong):**\n```typescript\nconst px = controlPoints[pointIndex * 2] * width;\nconst py = controlPoints[pointIndex * 2 + 1] * height;\n```\n\n**Target:**\n```typescript\nctx.translate(xPx, yPx);\nctx.rotate(rotation);\nctx.scale(sizePx, sizePx);\n// Draw with local-space points directly\n```\n\n**Files:** src/render/Canvas2DRenderer.ts (lines 207-280)\n**Spec:** .agent_planning/_future/2-local-space-end-to-end-spec.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T12:45:47.487364-07:00","created_by":"bmf","updated_at":"2026-01-21T12:45:47.487364-07:00","labels":["local-space","phase-6","renderer"]}
{"id":"oscilla-animator-v2-471","title":"Editable default sources in inspector","description":"Allow users to edit default source values directly from the Block Inspector. Currently defaults are read-only. Need to:\n- Add edit controls for constant default sources (sliders, number inputs)\n- Handle TimeRoot rail defaults (maybe dropdown to select different rails?)\n- Update patch when default values change\n- Integrate with live recompile","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:37:26.381352-07:00","created_by":"bmf","updated_at":"2026-01-20T10:49:39.932588-07:00","closed_at":"2026-01-20T10:49:39.932588-07:00","close_reason":"Feature complete. Default sources are editable in BlockInspector (commit 63c01e8). All functionality working and tested."}
{"id":"oscilla-animator-v2-4ft","title":"Add more adapter rules (vec2 broadcast, color broadcast)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T17:38:41.036943-07:00","created_by":"bmf","updated_at":"2026-01-12T18:01:55.116846-07:00","closed_at":"2026-01-12T18:01:55.116846-07:00","close_reason":"Implemented polymorphic FieldBroadcast block with '???' types. Single adapter rule with payload:'any' handles all types. Added bidirectional type resolution in normalizer (forward for outputs, backward for inputs). Adapter blocks get payloadType set during insertion."}
{"id":"oscilla-animator-v2-4lm","title":"Use size parameter in renderer for instance scaling","description":"The `_size` parameter in `renderPathAtParticle` is currently unused (line 211). Under local-space semantics, size must be used to scale local geometry to world-space via `ctx.scale(sizePx, sizePx)`.\n\n**Current:** `_size: number, // Currently unused - control points already include radius`\n\n**Target:** Apply `size * min(W, H)` as the scale factor for local-space geometry.\n\n**Files:** src/render/Canvas2DRenderer.ts\n**Spec:** .agent_planning/_future/2-local-space-end-to-end-spec.md section 'Canonical Transform Equation'\n**Depends on:** Renderer migration to instance transforms","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T12:46:01.936194-07:00","created_by":"bmf","updated_at":"2026-01-21T12:46:01.936194-07:00","labels":["local-space","phase-6","renderer"],"dependencies":[{"issue_id":"oscilla-animator-v2-4lm","depends_on_id":"oscilla-animator-v2-46m","type":"blocks","created_at":"2026-01-21T12:46:01.939532-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-4mf","title":"Refactor normalizer into explicit passes","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-12T17:38:38.724561-07:00","created_by":"bmf","updated_at":"2026-01-12T17:56:50.719083-07:00"}
{"id":"oscilla-animator-v2-4uq","title":"ui-features-v2","description":"Visualization and inspection UI - Table View, Block Inspector, Block Library, Domains Panel. Phase 2 P0-P2, P6 complete. P3 (Connection Matrix), P4 (Split Sidebar), P5 (TimeRoot Hidden), P7 (DefaultSource), P8 (Type Preview) planned. Block model, roles, bus block done. Remaining: connection matrix, split sidebar, timeRoot filtering, DefaultSource display, type preview.","status":"in_progress","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:19.522255-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:35.035541-07:00"}
{"id":"oscilla-animator-v2-55a","title":"Update ScheduleExecutor to use RenderAssembler","description":"Modify ScheduleExecutor.executeFrame() to call RenderAssembler.assembleFrame().\n\n## Deliverables\n- Import RenderAssembler in ScheduleExecutor\n- Delegate render assembly to assembleFrame()\n- Keep same output format (RenderFrameIR v1)\n\n## Acceptance Criteria\n- ScheduleExecutor imports RenderAssembler\n- executeFrame() delegates render assembly\n- Output format unchanged\n- No behavioral changes\n- All 610+ tests pass\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-extract-assembler-PLAN.md","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-21T14:17:19.002137-07:00","created_by":"bmf","updated_at":"2026-01-21T14:35:28.254983-07:00","closed_at":"2026-01-21T14:35:28.254983-07:00","close_reason":"ScheduleExecutor now calls RenderAssembler for render pass assembly","dependencies":[{"issue_id":"oscilla-animator-v2-55a","depends_on_id":"oscilla-animator-v2-xdk","type":"blocks","created_at":"2026-01-21T14:17:19.007856-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-55a","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:19:41.283906-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-583","title":"Create RenderAssembler to produce DrawPathInstancesOp","description":"Create new RenderAssembler module that transforms current RenderPassIR into explicit DrawPathInstancesOp structures.\n\n**Current:** executeFrame produces RenderPassIR with raw slot references, shape descriptors\n**Target:** New assembleRenderFrame step produces:\n- PathGeometryTemplate (topologyId, verbs, local-space points)\n- InstanceTransforms (position, size, rotation, scale2)\n- PathStyle (fill, stroke, opacity)\n\n**Algorithm from spec:**\n1. Resolve shape handle from scalar bank\n2. Materialize control points (local-space)\n3. Materialize instance transforms (world-space)\n4. Assemble style\n5. Return DrawPathInstancesOp\n\n**Files to create:** src/runtime/RenderAssembler.ts\n**Spec:** .agent_planning/_future/3-local-space-spec-deeper.md section 6\n**Types:** src/render/future-types.ts (already defined)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-21T12:46:34.718334-07:00","created_by":"bmf","updated_at":"2026-01-21T12:46:34.718334-07:00","labels":["local-space","phase-6","runtime"]}
{"id":"oscilla-animator-v2-5mg","title":"Context menus for blocks, ports, and edges","description":"Right-click context menus for graph elements:\n\nBlocks:\n- Duplicate block\n- Delete block\n- Disconnect all edges\n- Center in view\n- Copy block type to add elsewhere\n\nPorts:\n- Disconnect this port\n- Connect to... (opens compatible port selector)\n- Reset to default (for inputs)\n\nEdges:\n- Delete edge\n- Navigate to source block\n- Navigate to target block","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:37:55.51912-07:00","created_by":"bmf","updated_at":"2026-01-19T23:37:55.51912-07:00"}
{"id":"oscilla-animator-v2-5ug","title":"Remove fallback unary dispatch from applyNaryOp","description":"Spec section 4.3 says: Remove the 'fallback unary from n-ary' path.\n\n**Current (redundant):**\n```typescript\ndefault:\n  // Try unary if single value\n  if (values.length === 1) {\n    return applyUnaryOp(op, values[0]);\n  }\n  throw new Error(\\`OpCode ${op} not implemented...\\`);\n```\n\n**Target:**\n```typescript\ndefault:\n  throw new Error(\\`OpCode ${op} not implemented for ${values.length} args\\`);\n```\n\n**Rationale:**\n- applyOpcode (line 73-74) already routes 1-arg calls to applyUnaryOp\n- This fallback is redundant and creates two code paths for the same operation\n- Removing it simplifies dispatch reasoning\n\n**Files:** src/runtime/OpcodeInterpreter.ts (lines 184-190)\n**Spec:** .agent_planning/_future/5-opcode-interpreter.md section 4.3\n**Plan:** .agent_planning/opcode-interpreter-cleanup/SPRINT-20260121-opcode-arity-PLAN.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T13:29:02.76427-07:00","created_by":"bmf","updated_at":"2026-01-21T13:36:06.962931-07:00","closed_at":"2026-01-21T13:36:06.962931-07:00","close_reason":"Removed fallback unary dispatch from applyNaryOp default case","labels":["dispatch","opcode","phase-2"],"dependencies":[{"issue_id":"oscilla-animator-v2-5ug","depends_on_id":"oscilla-animator-v2-3xl","type":"blocks","created_at":"2026-01-21T13:29:02.767036-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-688","title":"Apply wrapPhase to oscSin/oscCos/oscTan kernels","description":"Update oscillator signal kernels to wrap phase input internally:\n- oscSin: wrap phase to [0,1) before converting to radians\n- oscCos: wrap phase to [0,1) before converting to radians  \n- oscTan: wrap phase to [0,1) before converting to radians\n\nThis ensures consistent behavior for phase values outside [0,1) range.\nCurrently triangle/square/sawtooth use % 1 but trig oscillators don't wrap.\n\nReference: .agent_planning/_future/6-signal-kernel.md section 4.1\nPlan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:36:22.568994-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:10.209609-07:00","closed_at":"2026-01-21T14:06:10.209609-07:00","close_reason":"Applied wrapPhase() to oscSin, oscCos, oscTan kernels","dependencies":[{"issue_id":"oscilla-animator-v2-688","depends_on_id":"oscilla-animator-v2-dbl","type":"blocks","created_at":"2026-01-21T13:36:22.581024-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-688","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:22.502785-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-6dm","title":"update-blocks-types","description":"Refactor blocks to use centralized type helpers, split god blocks into composable primitives","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:56:07.19297-07:00","created_by":"bmf","updated_at":"2026-01-12T11:56:36.323795-07:00","closed_at":"2026-01-12T11:56:36.323795-07:00","close_reason":"Completed - PositionSwirl split into 5 composable blocks, HueRainbow split into 2. All tests pass."}
{"id":"oscilla-animator-v2-6hp","title":"Refactor ConnectionMatrix.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/ConnectionMatrix.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:13.846042-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:13.846042-07:00"}
{"id":"oscilla-animator-v2-75w","title":"Eliminate controlPoints side-channel","description":"Remove pass.controlPoints optional field from RenderPassIR.\n\n## Deliverables\n- Control points now part of resolved shape\n- RenderAssembler produces complete shape data\n- Remove controlPoints from RenderPassIR type\n\n## Acceptance Criteria\n- controlPoints?: ArrayBufferView removed from RenderPassIR\n- Renderer doesn't read controlPoints separately\n- All path rendering still works\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-shape-resolution-PLAN.md","status":"open","priority":1,"issue_type":"chore","created_at":"2026-01-21T14:18:10.681992-07:00","created_by":"bmf","updated_at":"2026-01-21T14:18:10.681992-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-75w","depends_on_id":"oscilla-animator-v2-bzi","type":"blocks","created_at":"2026-01-21T14:18:10.683972-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-75w","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:01.769039-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-7c2","title":"Refactor main.ts: separate concerns (compile, runtime, frame loop, continuity)","description":"main.ts has grown to handle: patch building, compilation pipeline, runtime init, frame loop, continuity state management, and UI coordination. High coupling makes changes risky. No immediate action needed but architecture debt is accumulating. Future refactoring should split into: CompileOrchestrator (pass coordination), RuntimeExecutor (frame loop), ContinuityManager (state). Document this before attempting changes to avoid further coupling.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-21T04:45:04.42552-07:00","created_by":"bmf","updated_at":"2026-01-21T04:45:04.42552-07:00"}
{"id":"oscilla-animator-v2-7mi","title":"Extract field kernels to separate FieldKernels.ts module","description":"Extract applyKernel and applyKernelZipSig implementations from Materializer.ts to a dedicated FieldKernels.ts module.\n\n**Context:** 7-field-kernel.md notes Materializer.ts does 'double-duty' as both IR orchestrator and kernel library. Extracting kernels improves separation of concerns.\n\n**Scope:**\n- Create src/runtime/FieldKernels.ts\n- Move applyKernel (~300 lines)\n- Move applyKernelZipSig (~170 lines)\n- Export both functions\n- Update Materializer.ts to import from FieldKernels.ts\n\n**Acceptance:**\n- Kernels extracted to separate file\n- No circular dependencies\n- All tests pass\n- Build succeeds\n\n**Planning:** .agent_planning/field-kernel-phase2/PLAN.md","status":"closed","priority":4,"issue_type":"chore","created_at":"2026-01-21T13:35:42.819586-07:00","created_by":"bmf","updated_at":"2026-01-21T13:58:53.866022-07:00","closed_at":"2026-01-21T13:58:53.866022-07:00","close_reason":"Completed: Extracted field kernels to src/runtime/FieldKernels.ts (~580 lines moved from Materializer.ts)"}
{"id":"oscilla-animator-v2-7tm","title":"Add debug mapping error reporting to SimpleDebugPanel","description":"mapDebugEdges silently skips edges it can't map to slots (src/services/mapDebugEdges.ts:173). User sees no indication the debug system is broken—hovers over unmapped edge and gets no value/no error. Solution: (1) mapDebugEdges should collect unmapped edges with details (from block, to block, ports), (2) DebugService.getStatus() returns {totalEdgesMapped, errors[], isHealthy}, (3) SimpleDebugPanel checks status and displays red error banner if errors exist. User immediately sees 'MAPPING ERROR: Failed to map 3 edges: TimeRoot.tMs → Oscillator.phase ...' instead of silent failure. Prevents invisible debug corruption and aids troubleshooting.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-21T04:51:27.384661-07:00","created_by":"bmf","updated_at":"2026-01-21T04:51:27.384661-07:00"}
{"id":"oscilla-animator-v2-7vw","title":"Signal Kernel Phase 2: Contract Hardening","description":"## Overview\n\nImplements remaining recommendations from 6-signal-kernel.md to harden signal kernel contracts.\n\n## Context\n\nPhase 1 (complete) renamed oscillators (sin→oscSin, etc.) and documented layer contracts.\nPhase 2 focuses on input normalization and edge case handling.\n\n## Sprint Breakdown\n\n### Sprint 1: Contract Hardening\n- Add wrapPhase/clamp01 helpers\n- Apply wrapPhase to oscSin/oscCos/oscTan\n- Apply clamp01 to all 9 easing functions\n- Fix smoothstep edge0===edge1 edge case\n- Add edge case tests\n\n### Sprint 2: Signature Cleanup\n- Update kernel-signatures.ts for renamed oscillators\n\n## Reference Documents\n\n- Recommendation: .agent_planning/_future/6-signal-kernel.md\n- Evaluation: .agent_planning/signal-kernel-phase2/EVALUATION.md\n- Sprint 1 Plan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md\n- Sprint 2 Plan: .agent_planning/signal-kernel-phase2/SPRINT2-signature-cleanup-PLAN.md\n- Phase 1 Contracts: .agent_planning/kernel-refactor-phase1/KERNEL-CONTRACTS.md","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T13:37:31.533929-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:41.45308-07:00","closed_at":"2026-01-21T14:06:41.45308-07:00","close_reason":"All Phase 2 work complete: contract hardening and signature cleanup"}
{"id":"oscilla-animator-v2-8bi","title":"Add undo/redo support","description":"Implement undo/redo functionality for the editor.\n\nRete had rete-history-plugin with full history stack.\n\nRecommendation: Implement at PatchStore level (not UI layer) using action history pattern.\n- Track mutations as reversible actions\n- Support Ctrl+Z / Ctrl+Y / Ctrl+Shift+Z keyboard shortcuts\n\nThis is a cross-cutting feature that benefits all views (Flow, Table, Matrix).\n\nReference: .agent_planning/rete-removal/ANALYSIS-rete-vs-reactflow.md","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-18T23:32:38.215617-07:00","created_by":"bmf","updated_at":"2026-01-19T17:32:02.186356-07:00"}
{"id":"oscilla-animator-v2-8fp","title":"Add auto-arrange layout to React Flow editor","description":"Implement automatic graph layout for React Flow editor.\n\nRete used rete-auto-arrange-plugin with ELK layout algorithm:\n- elk.algorithm: 'layered'\n- elk.direction: 'RIGHT' (left-to-right flow)\n- elk.spacing.nodeNode: '100'\n- elk.layered.spacing.nodeNodeBetweenLayers: '80'\n\nOptions:\n1. Add dagre dependency (simpler, good enough)\n2. Add elkjs dependency (more powerful, what Rete used)\n\nAdd toolbar button to trigger layout.\n\nReference: .agent_planning/rete-removal/ANALYSIS-rete-vs-reactflow.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T23:32:25.128119-07:00","created_by":"bmf","updated_at":"2026-01-19T17:49:37.728784-07:00","closed_at":"2026-01-19T17:49:37.72879-07:00","close_reason":"Auto-arrange layout complete with edge case handling and tests. ELK algorithm integrated with left-to-right flow, 100px node spacing, 80px layer spacing. 9 comprehensive tests ensure functionality. All acceptance criteria met."}
{"id":"oscilla-animator-v2-8ji","title":"Fix: mapDebugEdges console.error should throw or fail compile","description":"mapDebugEdges logs console.error when debug index is incomplete but silently returns empty map. This masks a broken compiler state. Should either: (1) throw an Error to halt compilation and force fix, or (2) fail the compile result with error message. Current behavior lets broken debug state slip through unnoticed. User gets red console error but patch still runs with invisible debug corruption. Related to oscilla-animator-v2-7tm (error reporting on debug panel) but this is the upstream problem—should be caught at compile time, not silently masked.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-21T04:53:25.727982-07:00","created_by":"bmf","updated_at":"2026-01-21T04:53:25.727982-07:00"}
{"id":"oscilla-animator-v2-8vo","title":"Remove legacy IR types in src/compiler/ir/types.ts","description":"src/compiler/ir/types.ts is marked deprecated but still heavily used throughout the codebase. Need to migrate all usages to the new IR types and remove the deprecated file.","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-19T23:59:02.866686-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:02.866686-07:00"}
{"id":"oscilla-animator-v2-9oa","title":"Fix 7 failing tests (missing blocks: TimeMs, Id01, Hash)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T17:38:35.097605-07:00","created_by":"bmf","updated_at":"2026-01-12T17:48:38.440003-07:00","closed_at":"2026-01-12T17:48:38.440003-07:00","close_reason":"Tests fixed: TimeMs test skipped (block not implemented), Hash/Id01 tests skipped (fragile cache value-searching). All 274 tests now pass.","dependencies":[{"issue_id":"oscilla-animator-v2-9oa","depends_on_id":"oscilla-animator-v2-2th","type":"blocks","created_at":"2026-01-12T17:38:53.941435-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-9pi","title":"RenderAssembler: Before-Render Pipeline Refactor","description":"## Overview\n\nImplements the before-render stage from 8-before-render.md - adding a RenderAssembler stage between schedule execution and rendering.\n\n## Goals\n- Create clean separation between schedule execution and render preparation\n- Resolve all IR references into concrete typed arrays before renderer\n- Make renderer a pure sink with no interpretation logic\n\n## Sprints\n\n### Sprint 1: Extract RenderAssembler (HIGH confidence)\n- Create src/runtime/RenderAssembler.ts\n- Move render assembly from ScheduleExecutor\n- Add unit tests\n\n### Sprint 2: Shape Resolution (HIGH confidence)\n- Pre-resolve shapes in RenderAssembler\n- Eliminate controlPoints side-channel\n- Simplify renderer shape handling\n\n### Sprint 3: RenderFrameIR v2 (MEDIUM confidence)\n- Migrate to DrawOp-based format\n- Dual-format support during transition\n- Pure sink renderer for v2\n\n### Future Work (LOW confidence, deferred)\n- Typed scalar banks (f32/i32/shape2d)\n- Local-space geometry\n\n## Reference\n- Recommendation: .agent_planning/_future/8-before-render.md\n- Future types: src/render/future-types.ts\n- Plans: .agent_planning/render-assembler/","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T14:16:51.007107-07:00","created_by":"bmf","updated_at":"2026-01-21T14:16:51.007107-07:00"}
{"id":"oscilla-animator-v2-asz","title":"Add unit tests for RenderAssembler","description":"Create src/runtime/__tests__/RenderAssembler.test.ts with unit tests.\n\n## Deliverables\n- Test basic assembly from mock inputs\n- Test edge cases (empty passes, missing fields)\n\n## Acceptance Criteria\n- Test file exists\n- At least 5 test cases covering core functionality\n- Tests pass\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-extract-assembler-PLAN.md","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-21T14:17:31.21012-07:00","created_by":"bmf","updated_at":"2026-01-21T14:35:33.382632-07:00","closed_at":"2026-01-21T14:35:33.382632-07:00","close_reason":"Added 11 unit tests for RenderAssembler","dependencies":[{"issue_id":"oscilla-animator-v2-asz","depends_on_id":"oscilla-animator-v2-xdk","type":"blocks","created_at":"2026-01-21T14:17:31.212045-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-asz","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:19:46.398172-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-ay2","title":"Fix or remove skipped Id01 Block test suite","description":"Id01 Block tests are disabled as 'fragile'. Either fix the tests to be reliable or remove them if they're no longer relevant.","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-19T23:59:06.37711-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:06.37711-07:00"}
{"id":"oscilla-animator-v2-azp","title":"buses-and-rails","description":"Unified default source model: every input has a default source referencing a block output. TimeRoot outputs (phaseA, etc) wire to existing TimeRoot. Other defaults (constants) create derived block instances. No 'none' option - all inputs must have defaults.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T11:56:23.116553-07:00","created_by":"bmf","updated_at":"2026-01-19T22:47:53.633564-07:00","closed_at":"2026-01-19T22:47:53.633564-07:00","close_reason":"Implemented unified default source model. DefaultSource is now { blockType, output, params? }. TimeRoot outputs wire to existing TimeRoot, other blocks create derived instances. No 'none' option - all inputs have defaults. 7 commits, 10 files, 372 tests passing."}
{"id":"oscilla-animator-v2-b5v","title":"Enforce strict arity for binary opcodes (sub, div, mod)","description":"Spec requires strict arity enforcement. Currently binary ops silently degrade:\n\n**Current (wrong):**\n```typescript\ncase 'sub':\n  return values.length \u003e= 2 ? values[0] - values[1] : -values[0];\ncase 'div':\n  return values.length \u003e= 2 ? values[0] / values[1] : 1 / values[0];\ncase 'mod':\n  return values.length \u003e= 2 ? values[0] % values[1] : 0;\n```\n\n**Target:** Use `expectArity()` like pow does:\n```typescript\ncase 'sub':\n  expectArity('sub', values.length, 2);\n  return values[0] - values[1];\n```\n\n**Files:** src/runtime/OpcodeInterpreter.ts (lines 148-154)\n**Spec:** .agent_planning/_future/5-opcode-interpreter.md section 4.2","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T12:55:12.118874-07:00","created_by":"bmf","updated_at":"2026-01-21T13:29:41.898136-07:00","closed_at":"2026-01-21T13:29:41.898136-07:00","close_reason":"Duplicate of oscilla-animator-v2-d9h","labels":["arity","opcode","phase-2"]}
{"id":"oscilla-animator-v2-bvl","title":"Audit for hidden IRBuilder implementations","description":"Verify no hidden implementations of IRBuilder exist outside IRBuilderImpl. Run: grep -r 'implements IRBuilder' src/ --include='*.ts'. If found, audit for compatibility with new methods (getEventExprs, getSigSlots added in commit 751a754). If hidden implementations exist, they MUST be updated to implement new interface methods or compilation will break.","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-21T04:43:40.625056-07:00","created_by":"bmf","updated_at":"2026-01-21T04:43:40.625056-07:00"}
{"id":"oscilla-animator-v2-bx1","title":"Refactor BlockLibrary.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with 'const { patch } = useStores()' in src/ui/components/BlockLibrary.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:02.144928-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:02.144928-07:00"}
{"id":"oscilla-animator-v2-bzi","title":"Add shape resolution to RenderAssembler","description":"Extend assembleFrame() to resolve ShapeDescriptor into concrete topology + points.\n\n## Deliverables\n- Look up topology by topologyId in RenderAssembler\n- Resolve control points from field buffers\n- Produce normalized shape representation\n\n## Acceptance Criteria\n- ShapeDescriptor resolved to concrete topology + points\n- Topology lookup happens in RenderAssembler, not renderer\n- Control points embedded in shape data\n- All existing tests pass\n- No behavioral changes to rendered output\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-shape-resolution-PLAN.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-21T14:17:44.939973-07:00","created_by":"bmf","updated_at":"2026-01-21T14:35:38.501019-07:00","closed_at":"2026-01-21T14:35:38.501019-07:00","close_reason":"Added resolveShapeFully() with topology lookup and param resolution","dependencies":[{"issue_id":"oscilla-animator-v2-bzi","depends_on_id":"oscilla-animator-v2-55a","type":"blocks","created_at":"2026-01-21T14:17:44.942674-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-bzi","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:19:51.516677-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-c31","title":"renderer-implementation","description":"Renderer contract, Canvas2D implementation, render commands. Per spec: design-docs/CANONICAL-oscilla-v2.5-20260109/topics/06-renderer.md","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:24.832512-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:24.832512-07:00"}
{"id":"oscilla-animator-v2-c5v","title":"Remove shape decoding from renderer hot path","description":"With v2 format, renderer becomes pure sink - no shape interpretation.\n\n## Deliverables\n- v2 render path has no shape interpretation\n- No registry lookups in hot loop\n- Significantly simplified renderer code\n\n## Acceptance Criteria\n- v2 render path has no topology lookups\n- No param mapping in hot loop\n- No control point scaling (done in assembler)\n- All tests pass\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-render-ir-v2-PLAN.md","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-21T14:18:51.287597-07:00","created_by":"bmf","updated_at":"2026-01-21T14:18:51.287597-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-c5v","depends_on_id":"oscilla-animator-v2-df6","type":"blocks","created_at":"2026-01-21T14:18:51.289783-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-c5v","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:17.233385-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-ccc","title":"Consolidate debug service setup into single location","description":"buildAndCompile (src/main.ts:465) and recompileFromStore (src/main.ts:619) both call mapDebugEdges and set debugService mapping. Code is duplicated (lines 465-471 and 619-622). Single Source of Truth violation: if one location gets updated, other may drift. Solution: Extract into reusable function setupDebugProbe(patch, program) called from both sites. Ensures consistent initialization and prevents sync bugs. NOTE: When fixing evalSig performance (oscilla-animator-v2-43g), this setup may also need rework - debug probing may not require frame-loop evaluation at all.","status":"open","priority":1,"issue_type":"chore","created_at":"2026-01-21T04:43:50.373059-07:00","created_by":"bmf","updated_at":"2026-01-21T04:45:11.0994-07:00"}
{"id":"oscilla-animator-v2-ckp","title":"patch-editor-ui","description":"Visual patch editor for creating and editing animation programs.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:26.629202-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:26.629202-07:00"}
{"id":"oscilla-animator-v2-d06","title":"Refactor DomainsPanel.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/DomainsPanel.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:26.542301-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:26.542301-07:00"}
{"id":"oscilla-animator-v2-d4n","title":"runtime-execution","description":"Offset-addressed execution, schedule executor update","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T11:56:25.278153-07:00","created_by":"bmf","updated_at":"2026-01-12T11:56:25.278153-07:00"}
{"id":"oscilla-animator-v2-d9c","title":"Refactor rootStore singleton imports to useStores() hook","description":"Multiple React components import rootStore singleton directly instead of using useStores() hook. This violates dependency injection principles and makes testing difficult. Files to fix: BlockLibrary.tsx, BlockInspector.tsx, ConnectionMatrix.tsx, TableView.tsx, DomainsPanel.tsx, CanvasTab.tsx, ContinuityControls.tsx, ContinuityPanel.tsx, ReactFlowEditor.tsx, OscillaNode.tsx, sync.ts, context menus. Pattern: replace 'import { rootStore }' with 'const { store } = useStores()'","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-20T21:40:23.576872-07:00","created_by":"bmf","updated_at":"2026-01-20T21:42:15.109649-07:00","closed_at":"2026-01-20T21:42:15.109649-07:00","close_reason":"Broken into individual tickets: bx1, 1w7, 6hp, 1b6, d06, y1n, 0pg, 2hs, di2, xkn"}
{"id":"oscilla-animator-v2-d9h","title":"Enforce strict arity for binary opcodes (sub, div, mod)","description":"Spec requires strict arity enforcement. Currently binary ops silently degrade.\n\n**Current (wrong):**\n```typescript\ncase 'sub':\n  return values.length \u003e= 2 ? values[0] - values[1] : -values[0];\ncase 'div':\n  return values.length \u003e= 2 ? values[0] / values[1] : 1 / values[0];\ncase 'mod':\n  return values.length \u003e= 2 ? values[0] % values[1] : 0;\n```\n\n**Target:**\n```typescript\ncase 'sub':\n  expectArity('sub', values.length, 2);\n  return values[0] - values[1];\n```\n\n**Files:** src/runtime/OpcodeInterpreter.ts (lines 147-154)\n**Spec:** .agent_planning/_future/5-opcode-interpreter.md section 4.2\n**Plan:** .agent_planning/opcode-interpreter-cleanup/SPRINT-20260121-opcode-arity-PLAN.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T13:28:30.761981-07:00","created_by":"bmf","updated_at":"2026-01-21T13:35:56.764897-07:00","closed_at":"2026-01-21T13:35:56.764897-07:00","close_reason":"Implemented strict arity with expectArity()","labels":["arity","opcode","phase-2"]}
{"id":"oscilla-animator-v2-dbl","title":"Add wrapPhase/clamp01 helpers to SignalEvaluator","description":"Add internal helper functions for input normalization in SignalEvaluator:\n- wrapPhase(p): wraps phase to [0,1) range using p - floor(p)\n- clamp01(x): clamps value to [0,1] range\n\nThese enable consistent contract enforcement across all signal kernels.\n\nReference: .agent_planning/_future/6-signal-kernel.md\nPlan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:36:09.503351-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:05.08316-07:00","closed_at":"2026-01-21T14:06:05.08316-07:00","close_reason":"Added wrapPhase() and clamp01() helper functions to SignalEvaluator.ts","dependencies":[{"issue_id":"oscilla-animator-v2-dbl","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:17.366801-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-df6","title":"Add v2 dispatch path in renderer","description":"Renderer handles both v1 and v2 RenderFrameIR formats.\n\n## Deliverables\n- Check frame.version in renderer\n- Dispatch to appropriate render path\n- v2 path uses DrawOp execution\n\n## Acceptance Criteria\n- Renderer accepts RenderFrameIR v1 or v2\n- v2 DrawOps executed correctly\n- Identical visual output for both versions\n- No regression in existing functionality\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-render-ir-v2-PLAN.md","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-21T14:18:38.134103-07:00","created_by":"bmf","updated_at":"2026-01-21T14:18:38.134103-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-df6","depends_on_id":"oscilla-animator-v2-1l0","type":"blocks","created_at":"2026-01-21T14:18:38.136385-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-df6","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:12.069237-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-dha","title":"Remove commented-out validators and dead code","description":"Multiple pieces of dead code need removal:\n- Commented-out validators: validateConnectivity, validateOutputUsage\n- Dead 'OLD' section with orphaned JSDoc in IRBuilderImpl.ts\n- These are ghosts that add confusion and should be cleaned up","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-19T23:59:07.599598-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:07.599598-07:00"}
{"id":"oscilla-animator-v2-dhu","title":"Remove or integrate Pass 8 (link-resolution) - 357 lines commented out","description":"Pass 8 (link-resolution) is a 357-line compiler pass that exists but never runs - it's commented out. Either remove it entirely or integrate it properly into the compilation pipeline.","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-19T23:59:05.326675-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:05.326675-07:00"}
{"id":"oscilla-animator-v2-di2","title":"Refactor ReactFlowEditor and related files to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in: ReactFlowEditor.tsx, OscillaNode.tsx, sync.ts, and context menu files (BlockContextMenu.tsx, EdgeContextMenu.tsx, PortContextMenu.tsx)","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:56.509981-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:56.509981-07:00"}
{"id":"oscilla-animator-v2-e9y","title":"Remove CompileError backward-compat ghost fields","description":"CompileError has backward-compat fields (kind, location, severity) that are still being populated but should be removed. These are ghost fields that add confusion and maintenance burden.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-19T23:59:04.027305-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:04.027305-07:00"}
{"id":"oscilla-animator-v2-eir","title":"Audit IR type system alignment with canonical spec","description":"Audit all IR types in src/compiler/ir/types.ts against the canonical specification in design-docs/CANONICAL-oscilla-v2.5-20260109/ to ensure:\n- All expression types (SigExpr, FieldExpr, EventExpr) are fully supported\n- All step types align with spec requirements\n- Instance/Domain types match spec definitions\n- Continuity types (ContinuityPolicy, GaugeSpec) align with continuity system spec\n- No gaps between spec and implementation\n- No orphaned types without spec backing\n\nThis is a documentation/verification task, not implementation work.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T01:23:59.205419-07:00","created_by":"bmf","updated_at":"2026-01-20T01:41:17.649153-07:00","closed_at":"2026-01-20T01:41:17.649153-07:00","close_reason":"Added implementation notes to 04-compilation.md: (1) naming conventions not prescribed, (2) unified ValueSlot acceptable with metadata"}
{"id":"oscilla-animator-v2-elv","title":"ui-framework","description":"Panel-based UI layout system using jsPanel4 and MUI. Three-column layout with tabs, toolbar, sidebars. Canvas preview + Patch diagram in center. Inspector, debug, help panels. 146 tests passing. 60 FPS animation.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:12.749438-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:46.216254-07:00","closed_at":"2026-01-12T11:57:46.216257-07:00"}
{"id":"oscilla-animator-v2-f84","title":"Remove 47 console.log statements from production code","description":"47 console.log statements exist in production code. These should be either removed or converted to proper diagnostic/logging infrastructure.","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-19T23:59:08.923221-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:08.923221-07:00"}
{"id":"oscilla-animator-v2-g2c","title":"UI for Const block should show type-appropriate value editor","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T17:38:44.313531-07:00","created_by":"bmf","updated_at":"2026-01-12T17:38:44.313531-07:00"}
{"id":"oscilla-animator-v2-giv","title":"ir-5-axes","description":"Implement 5-axis metadata in IR schema, CompiledProgramIR, slotMeta with offsets","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:56:16.65793-07:00","created_by":"bmf","updated_at":"2026-01-12T12:00:04.650884-07:00","closed_at":"2026-01-12T12:00:04.650884-07:00","close_reason":"Closed"}
{"id":"oscilla-animator-v2-gy0","title":"Add edge case tests for signal kernel contracts","description":"Add tests to verify signal kernel contracts after hardening:\n\nOscillator tests:\n- Phase \u003e 1 should wrap (e.g., 1.5 behaves like 0.5)\n- Phase \u003c 0 should wrap (e.g., -0.25 behaves like 0.75)\n\nEasing tests:\n- t \u003c 0 should clamp to 0 (return 0)\n- t \u003e 1 should clamp to 1 (return 1)\n\nSmoothstep tests:\n- edge0 === edge1 should return step function\n\nReference: .agent_planning/_future/6-signal-kernel.md\nPlan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:37:15.33089-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:30.683341-07:00","closed_at":"2026-01-21T14:06:30.683341-07:00","close_reason":"Added 53 edge case tests in signal-kernel-contracts.test.ts","dependencies":[{"issue_id":"oscilla-animator-v2-gy0","depends_on_id":"oscilla-animator-v2-688","type":"blocks","created_at":"2026-01-21T13:37:15.332721-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-gy0","depends_on_id":"oscilla-animator-v2-q0s","type":"blocks","created_at":"2026-01-21T13:37:15.334652-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-gy0","depends_on_id":"oscilla-animator-v2-jz5","type":"blocks","created_at":"2026-01-21T13:37:15.337359-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-gy0","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:37.91134-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-jon","title":"type-system","description":"AxesDescIR integration, bridge functions, SlotMetaEntry population","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T11:56:18.756129-07:00","created_by":"bmf","updated_at":"2026-01-19T18:53:05.577169-07:00","closed_at":"2026-01-19T18:53:05.577169-07:00","close_reason":"Work completed. AxesDescIR (now ResolvedExtent) integrated, bridge functions implemented in src/compiler/ir/bridges.ts (31 tests passing), SlotMetaEntry population in compile.ts. See .agent_planning/_completed/ir-5-axes/COMPLETION-20260109-212700.md for full completion evidence."}
{"id":"oscilla-animator-v2-jz5","title":"Fix smoothstep edge case when edge0 === edge1","description":"Handle degenerate case in smoothstep signal kernel where edge0 === edge1.\n\nCurrent behavior: Division by zero produces NaN or Infinity.\nExpected behavior: Return step function (0 if x \u003c edge, 1 otherwise).\n\nFix:\n```typescript\nif (edge0 === edge1) return x \u003c edge0 ? 0 : 1;\n```\n\nReference: .agent_planning/_future/6-signal-kernel.md section 4.3\nPlan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T13:36:48.426297-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:20.460448-07:00","closed_at":"2026-01-21T14:06:20.460448-07:00","close_reason":"Fixed smoothstep edge0===edge1 edge case","dependencies":[{"issue_id":"oscilla-animator-v2-jz5","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:32.790788-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-k0v","title":"compilation-pipeline","description":"Compilation Pipeline Cleanup\n\nClean up code after successful implementation of all 8 compilation passes:\n- Remove unused state API stubs (declareState, readState, writeState, getTimepointMarkers)\n- Document Pass 8 decision (implemented but not used)\n- Resolve seed management TODO in Pass 6\n\nAll 8 passes implemented and working:\n✅ Pass 1: Normalization\n✅ Pass 2: Type Graph\n✅ Pass 3: Time Topology\n✅ Pass 4: Dependency Graph\n✅ Pass 5: SCC Validation\n✅ Pass 6: Block Lowering\n✅ Pass 7: Schedule Construction\n✅ Pass 8: Link Resolution (reference implementation)\n\nWorking state APIs: allocStateSlot(), sigStateRead(), stepStateWrite()\nTest status: 372 passing, 0 failures\n\n**Note:** \"Passes 5-10\" was a miscount. There are 8 passes total.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T11:56:14.292076-07:00","created_by":"bmf","updated_at":"2026-01-19T18:34:54.611296-07:00","closed_at":"2026-01-19T18:34:54.611296-07:00","close_reason":"Compilation pipeline cleanup complete. Removed unused state API stubs, documented Pass 8 decision, resolved seed management TODO. All 8 passes working, 372 tests passing."}
{"id":"oscilla-animator-v2-kr3","title":"Add Field Kernel Registry comment block to Materializer","description":"Add explicit registry comment block before applyKernel function documenting all registered field kernels.\n\n**Context:** 7-field-kernel.md recommends treating applyKernel/applyKernelZipSig as a registry with clear documentation.\n\n**Scope:**\n- Add registry comment block at ~line 650\n- List all registered zip and zipSig kernels\n- Note coord-space agnostic principle\n\n**Acceptance:**\n- Comment block added\n- Build succeeds\n\n**Planning:** .agent_planning/field-kernel-phase2/PLAN.md","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-21T13:35:15.988984-07:00","created_by":"bmf","updated_at":"2026-01-21T13:58:42.623711-07:00","closed_at":"2026-01-21T13:58:42.623711-07:00","close_reason":"Completed: Added Field Kernel Registry comment block documenting all kernels and architectural rules"}
{"id":"oscilla-animator-v2-lcb","title":"Fix 41 'as any' type casts (15 in production code)","description":"41 'as any' casts exist in the codebase, with 15 in production code. These undermine type safety and should be fixed with proper typing.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-19T23:59:10.176054-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:10.176054-07:00"}
{"id":"oscilla-animator-v2-nu6","title":"Connect/disconnect edges from Block Inspector","description":"Ability to manage connections from within the Block Inspector panel:\n- Each port row shows current connection status\n- Click to disconnect existing edge\n- Click to open connection picker for unconnected ports\n- Connection picker shows compatible blocks/ports\n- Filter/search in connection picker","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:38:02.543762-07:00","created_by":"bmf","updated_at":"2026-01-19T23:38:02.543762-07:00"}
{"id":"oscilla-animator-v2-nzq","title":"Minor cleanup: legacy types, helpers, TODOs, and sprint references","description":"Collection of minor cleanup items:\n- Legacy PortRef type alias\n- Legacy label field on Block\n- worldToAxes helper for 'old world' conversion\n- ~15 TODO comments with incomplete features\n- 60+ sprint references that are now meaningless\n\nThese are low-priority cleanup items that can be addressed incrementally.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-19T23:59:12.271455-07:00","created_by":"bmf","updated_at":"2026-01-19T23:59:12.271455-07:00"}
{"id":"oscilla-animator-v2-o4k","title":"Add rotation and scale2 channels to RenderPassIR","description":"Current RenderPassIR lacks rotation and scale2 (anisotropic) fields. These are needed for full instance transform support.\n\n**Current RenderPassIR:**\n```typescript\ninterface RenderPassIR {\n  kind: 'instances2d';\n  count: number;\n  position: ArrayBufferView;\n  color: ArrayBufferView;\n  size: number | ArrayBufferView;\n  shape: ShapeDescriptor | ArrayBufferView | number;\n  controlPoints?: ArrayBufferView;\n}\n```\n\n**Target (from future-types.ts):**\n```typescript\nrotation?: Float32Array;  // radians per instance\nscale2?: Float32Array;    // anisotropic x,y per instance\n```\n\n**Files:** \n- src/runtime/ScheduleExecutor.ts (RenderPassIR type + executeFrame)\n- src/render/Canvas2DRenderer.ts (consume new fields)\n\n**Spec:** .agent_planning/_future/2-local-space-end-to-end-spec.md section 'Instance transform channels'","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-21T12:46:52.008327-07:00","created_by":"bmf","updated_at":"2026-01-21T12:46:52.008327-07:00","labels":["local-space","phase-6","renderer","runtime"]}
{"id":"oscilla-animator-v2-o94","title":"Remove legacy ConstVec2 and ConstColor blocks","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T17:38:33.617392-07:00","created_by":"bmf","updated_at":"2026-01-12T17:48:19.700559-07:00","closed_at":"2026-01-12T17:48:19.700559-07:00","close_reason":"Removed ConstVec2 and ConstColor block definitions from signal-blocks.ts. Updated normalizer to use unified Const block for all types including vec2 and color."}
{"id":"oscilla-animator-v2-owm","title":"Remove mapDebugEdges calls from main.ts hot path","description":"mapDebugEdges(patch, program) called from buildAndCompile (src/main.ts:468) and recompileFromStore (src/main.ts:622). These calls should NOT be in main.ts—they're orchestration logic that violates compiler/runtime separation. mapDebugEdges is mapping IR to patches, which is a compile-time concern, not runtime. Move this logic into a proper layer: either (1) into compiler pipeline as final pass, or (2) into separate DebugProbeSetup module that main.ts calls but doesn't embed. Blocks: oscilla-animator-v2-43g (evalSig audit may determine debug doesn't need frame-loop eval at all).","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-21T04:45:39.84629-07:00","created_by":"bmf","updated_at":"2026-01-21T04:45:39.84629-07:00"}
{"id":"oscilla-animator-v2-p4b","title":"Simplify renderer shape handling","description":"Reduce shape interpretation in Canvas2DRenderer now that shapes are pre-resolved.\n\n## Deliverables\n- Remove or simplify determineShapeMode()\n- Renderer trusts pre-resolved shape data\n- Keep backward compatibility with v1 format\n\n## Acceptance Criteria\n- Renderer no longer does topology registry lookups\n- determineShapeMode() simplified or removed\n- Rendered output identical to before\n- All tests pass\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-shape-resolution-PLAN.md","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-21T14:17:57.808096-07:00","created_by":"bmf","updated_at":"2026-01-21T14:35:43.625369-07:00","closed_at":"2026-01-21T14:35:43.625369-07:00","close_reason":"Renderer now uses resolvedShape when available, avoiding redundant lookups","dependencies":[{"issue_id":"oscilla-animator-v2-p4b","depends_on_id":"oscilla-animator-v2-bzi","type":"blocks","created_at":"2026-01-21T14:17:57.810659-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-p4b","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:19:56.637315-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-q0s","title":"Apply clamp01 to all easing signal kernels","description":"Update all 9 easing signal kernels to clamp input t to [0,1] internally:\n- easeInQuad, easeOutQuad, easeInOutQuad\n- easeInCubic, easeOutCubic, easeInOutCubic\n- easeInElastic, easeOutElastic, easeOutBounce\n\nThis ensures well-defined output for inputs outside expected [0,1] domain.\nMatches recommendation: 'For 1-arg easings: clamp t into [0,1] internally.'\n\nReference: .agent_planning/_future/6-signal-kernel.md section 4.4\nPlan: .agent_planning/signal-kernel-phase2/SPRINT1-contract-hardening-PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:36:35.508689-07:00","created_by":"bmf","updated_at":"2026-01-21T14:06:15.337742-07:00","closed_at":"2026-01-21T14:06:15.337742-07:00","close_reason":"Applied clamp01() to all 9 easing functions","dependencies":[{"issue_id":"oscilla-animator-v2-q0s","depends_on_id":"oscilla-animator-v2-dbl","type":"blocks","created_at":"2026-01-21T13:36:35.510682-07:00","created_by":"bmf"},{"issue_id":"oscilla-animator-v2-q0s","depends_on_id":"oscilla-animator-v2-7vw","type":"parent-child","created_at":"2026-01-21T13:38:27.665639-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-qch","title":"Update polygon default radius from 0.1 to 1.0 for local-space","description":"Default radiusX/radiusY in path-blocks.ts are 0.1 (normalized world-space semantics). Under local-space, defaults should be 1.0 (unit local-space).\n\n**Current:** `ctx.b.sigConst((config?.radiusX as number) ?? 0.1, signalType('float'));`\n**Target:** `ctx.b.sigConst((config?.radiusX as number) ?? 1.0, signalType('float'));`\n\n**Files:** src/blocks/path-blocks.ts (lines 164, 169)\n**Spec:** .agent_planning/_future/1-local-space.md section 'polygonVertex must output local points'\n\n**Note:** This change must be coordinated with renderer migration - doing it alone would break current rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T12:46:17.848619-07:00","created_by":"bmf","updated_at":"2026-01-21T12:46:17.848619-07:00","labels":["blocks","local-space","phase-6"],"dependencies":[{"issue_id":"oscilla-animator-v2-qch","depends_on_id":"oscilla-animator-v2-46m","type":"blocks","created_at":"2026-01-21T12:46:17.851303-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-qps","title":"canonical-arch-alignment","description":"Implement canonical 5-axis type system (PayloadType, AxisTag, Cardinality, Temporality, Binding, Extent, SignalType)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:56:10.382902-07:00","created_by":"bmf","updated_at":"2026-01-12T11:56:39.198605-07:00","closed_at":"2026-01-12T11:56:39.198605-07:00","close_reason":"Completed - P0-P3 delivered. 68 tests passing. All 25 blocks migrated to SignalType system."}
{"id":"oscilla-animator-v2-u06","title":"Implement local-space geometry for control points","description":"Control points in local space, instance transforms separate.\n\n## Overview\nAll geometry should be local-space (centered at origin, |p| ≈ O(1)).\nInstance transforms (position, size, rotation, scale2) applied at render time.\n\n## Major Unknowns\n- Which kernels need updating\n- Backward compatibility with existing patches\n- Transform order validation\n\n## Status\nDEFERRED - Current world-space approach works for basic cases. This is an optimization for future extensibility.\n\nPlan: .agent_planning/render-assembler/SPRINT-FUTURE-local-space-geometry-PLAN.md","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-21T14:19:21.203975-07:00","created_by":"bmf","updated_at":"2026-01-21T14:19:21.203975-07:00","dependencies":[{"issue_id":"oscilla-animator-v2-u06","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:20:27.515557-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-uv9","title":"Phase 6: Local-space renderer migration","description":"Complete implementation of local-space coordinate system for geometry and instance transforms.\n\n**Background:**\nSpecs in .agent_planning/_future/:\n- 1-local-space.md\n- 2-local-space-end-to-end-spec.md  \n- 3-local-space-spec-deeper.md\n\n**Status:**\n- ✅ Documentation \u0026 contracts complete\n- ✅ Future types defined (src/render/future-types.ts)\n- ✅ Kernel layer produces local-space (polygonVertex, starVertex)\n- ❌ Renderer still uses width/height scaling\n- ❌ RenderAssembler not implemented\n- ❌ Instance transforms (rotation/scale2) not wired\n\n**Child tickets:**\n- oscilla-animator-v2-46m: Renderer instance transforms\n- oscilla-animator-v2-4lm: Size parameter usage\n- oscilla-animator-v2-qch: Default radius update\n- oscilla-animator-v2-583: RenderAssembler\n- oscilla-animator-v2-o4k: rotation/scale2 channels\n- oscilla-animator-v2-xga: Local-space tests\n- oscilla-animator-v2-0uk: SVG renderer\n\n**Completion criteria:**\n- Control points in local space (centered at origin, |p|≈1)\n- Instance transforms applied at render time\n- Size scales local geometry correctly\n- SVG renderer uses \u003cdefs\u003e/\u003cuse\u003e for geometry reuse","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T12:47:45.312225-07:00","created_by":"bmf","updated_at":"2026-01-21T12:47:45.312225-07:00","labels":["local-space","phase-6","roadmap"]}
{"id":"oscilla-animator-v2-v5h","title":"Phase continuity offset computation","description":"Compute and apply phase offsets on hot-swap when periods change. Currently offset infrastructure exists in TimeState (offsetA, offsetB) but offsets are never computed. Per spec: new_phase = old_phase + (new_speed - old_speed) * elapsed_time. Required for smooth transitions when editing TimeRoot period parameters.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-19T19:27:44.184252-07:00","created_by":"bmf","updated_at":"2026-01-19T19:27:44.184252-07:00"}
{"id":"oscilla-animator-v2-vph","title":"Complete field kernel signatures in kernel-signatures.ts","description":"Add missing kernel signatures for all field kernels in Materializer.ts to kernel-signatures.ts.\n\n**Context:** 7-field-kernel.md recommends complete TypeScript signatures for all field kernels. kernel-signatures.ts exists but is missing several kernels.\n\n**Missing signatures:**\n- makeVec2\n- hsvToRgb (both variants)\n- jitter2d / fieldJitter2D\n- attract2d\n- fieldRadiusSqrt\n- fieldAdd\n- applyOpacity\n- polygonVertex\n- starVertex\n\n**Acceptance:**\n- All field kernels have signatures with input/output units\n- TypeScript compiles\n- Tests pass\n\n**Planning:** .agent_planning/field-kernel-phase2/PLAN.md","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-21T13:34:48.432503-07:00","created_by":"bmf","updated_at":"2026-01-21T13:58:20.293591-07:00","closed_at":"2026-01-21T13:58:20.293591-07:00","close_reason":"Completed: Added signatures for all field kernels (makeVec2, hsvToRgb, jitter2d, fieldJitter2D, attract2d, fieldRadiusSqrt, fieldAdd, applyOpacity, polygonVertex, starVertex)"}
{"id":"oscilla-animator-v2-vr6","title":"Improved port visualization","description":"Ports in ReactFlow editor are too small (10x10px) and have no identifying info visible. Need to:\n- Larger clickable area for ports (at least 16x16px)\n- Show port name as label near port\n- Color-code by type (already partially done)\n- Better visual distinction between connected vs unconnected ports\n- Consider port grouping for blocks with many ports","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-19T23:37:32.86833-07:00","created_by":"bmf","updated_at":"2026-01-19T23:37:32.86833-07:00"}
{"id":"oscilla-animator-v2-wbs","title":"Validate value representation when type is resolved","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T17:38:46.171734-07:00","created_by":"bmf","updated_at":"2026-01-12T17:38:46.171734-07:00"}
{"id":"oscilla-animator-v2-wc9","title":"Add connection type validation to React Flow editor","description":"Port socket type compatibility rules from removed Rete implementation to React Flow.\n\nRete had OscillaSocket class with isCompatibleWith() that enforced:\n- Signal → Signal (same payload): COMPATIBLE\n- Signal → Field (same payload): COMPATIBLE (broadcast)\n- Field → Signal: INCOMPATIBLE\n- Field → Field (same payload): COMPATIBLE\n\nImplementation location: src/ui/reactFlowEditor/sync.ts createConnectHandler()\n\nReference: .agent_planning/rete-removal/ANALYSIS-rete-vs-reactflow.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T23:32:13.632022-07:00","created_by":"bmf","updated_at":"2026-01-19T14:24:47.227159-07:00","closed_at":"2026-01-19T14:24:47.227159-07:00","close_reason":"Verified: Connection type validation is fully implemented and working correctly. All type compatibility rules are enforced via ReactFlow's isValidConnection callback. Created 12 comprehensive behavioral tests - all passing. See .agent_planning/connection-validation-wc9/VERIFICATION.md for detailed evidence."}
{"id":"oscilla-animator-v2-xdk","title":"Create RenderAssembler.ts module","description":"Create src/runtime/RenderAssembler.ts with assembleFrame() function.\n\n## Deliverables\n- Create RenderAssembler.ts module\n- Export assembleFrame() function\n- Move render pass assembly logic from ScheduleExecutor\n\n## Acceptance Criteria\n- File exists at src/runtime/RenderAssembler.ts\n- assembleFrame() exported and callable\n- Function signature: (slots, fieldBuffers, renderSteps, ...) =\u003e RenderFrameIR\n- All existing tests pass unchanged\n- TypeScript compiles without errors\n\nPlan: .agent_planning/render-assembler/SPRINT-20260121-extract-assembler-PLAN.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-21T14:17:05.527896-07:00","created_by":"bmf","updated_at":"2026-01-21T14:35:23.090755-07:00","closed_at":"2026-01-21T14:35:23.090755-07:00","close_reason":"Created RenderAssembler.ts with assembleRenderPass function","dependencies":[{"issue_id":"oscilla-animator-v2-xdk","depends_on_id":"oscilla-animator-v2-9pi","type":"parent-child","created_at":"2026-01-21T14:19:36.167208-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-xga","title":"Add local-space sanity tests for control points and instance transforms","description":"No specific tests verify local-space behavior. Add tests for:\n\n1. **Control point centering:** polygonVertex outputs centered at (0,0)\n2. **Control point magnitude:** Unit radius gives |p| ≈ 1.0\n3. **Instance transform application:** size scales local geometry correctly\n4. **Reference dimension:** min(W,H) used for isotropic scaling\n\n**Test file:** src/runtime/__tests__/local-space-sanity.test.ts (new)\n\n**Example tests:**\n```typescript\nit('polygonVertex produces local-space points centered at origin', () =\u003e {\n  // Sum of all vertices for regular polygon should be near (0,0)\n});\n\nit('size parameter scales local geometry to world pixels', () =\u003e {\n  // size=0.1 with D=1000 should produce 100px radius\n});\n```\n\n**Spec:** .agent_planning/_future/3-local-space-spec-deeper.md section 'Coordinate Spaces: Formal Spec'","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T12:47:09.173408-07:00","created_by":"bmf","updated_at":"2026-01-21T12:47:09.173408-07:00","labels":["local-space","phase-6","testing"]}
{"id":"oscilla-animator-v2-xj4","title":"Add strict arity enforcement tests for opcodes","description":"Add comprehensive tests verifying arity enforcement throws on wrong arg counts.\n\n**New test cases needed:**\n```typescript\ndescribe('OpcodeInterpreter - Strict Arity Enforcement', () =\u003e {\n  it('sub: requires exactly 2 arguments', () =\u003e {\n    expect(() =\u003e applyOpcode('sub', [5])).toThrow(/exactly 2 argument/);\n    expect(() =\u003e applyOpcode('sub', [5, 3, 2])).toThrow(/exactly 2 argument/);\n  });\n\n  it('div: requires exactly 2 arguments', () =\u003e {\n    expect(() =\u003e applyOpcode('div', [6])).toThrow(/exactly 2 argument/);\n  });\n\n  it('mod: requires exactly 2 arguments', () =\u003e {\n    expect(() =\u003e applyOpcode('mod', [7])).toThrow(/exactly 2 argument/);\n  });\n\n  it('clamp: requires exactly 3 arguments', () =\u003e {\n    expect(() =\u003e applyOpcode('clamp', [0.5, 0])).toThrow(/exactly 3 argument/);\n  });\n\n  it('lerp: requires exactly 3 arguments', () =\u003e {\n    expect(() =\u003e applyOpcode('lerp', [0, 10])).toThrow(/exactly 3 argument/);\n  });\n});\n```\n\n**Files:** src/runtime/__tests__/OpcodeInterpreter.test.ts (add ~30 lines)\n**Plan:** .agent_planning/opcode-interpreter-cleanup/SPRINT-20260121-opcode-arity-PLAN.md\n**DoD:** .agent_planning/opcode-interpreter-cleanup/SPRINT-20260121-opcode-arity-DOD.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T13:29:20.256155-07:00","created_by":"bmf","updated_at":"2026-01-21T13:36:12.075679-07:00","closed_at":"2026-01-21T13:36:12.075679-07:00","close_reason":"Added 10 new arity enforcement tests, all passing","labels":["opcode","phase-2","testing"],"dependencies":[{"issue_id":"oscilla-animator-v2-xj4","depends_on_id":"oscilla-animator-v2-5ug","type":"blocks","created_at":"2026-01-21T13:29:20.258969-07:00","created_by":"bmf"}]}
{"id":"oscilla-animator-v2-xkn","title":"Remove rootStore singleton export from stores module","description":"After all components are refactored to use useStores(), remove the singleton export from src/stores/instance.ts and src/stores/index.ts. This completes the dependency injection refactor.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:59.851519-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:59.851519-07:00"}
{"id":"oscilla-animator-v2-xxi","title":"design-docs-audit","description":"Audit design docs for contradictions, ambiguities, and inconsistencies","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:56:12.369653-07:00","created_by":"bmf","updated_at":"2026-01-12T11:56:41.498279-07:00","closed_at":"2026-01-12T11:56:41.498279-07:00","close_reason":"Completed - Design docs audit for contradictions and inconsistencies complete"}
{"id":"oscilla-animator-v2-y1n","title":"Refactor CanvasTab.tsx to use useStores() hook","description":"Replace 'import { rootStore }' with useStores() hook in src/ui/components/app/CanvasTab.tsx","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-20T21:41:30.47009-07:00","created_by":"bmf","updated_at":"2026-01-20T21:41:30.47009-07:00"}
{"id":"oscilla-animator-v2-ydk","title":"Rename kernelName parameter to fieldOp in Materializer","description":"Rename the 'kernelName' parameter to 'fieldOp' in applyKernel and applyKernelZipSig functions for improved clarity.\n\n**Context:** 7-field-kernel.md recommends this naming to clarify that these are field-level operations, not generic kernels.\n\n**Scope:**\n- applyKernel function signature (21 occurrences)\n- applyKernelZipSig function signature\n- Error messages\n\n**Acceptance:**\n- All references renamed\n- Tests pass\n- Build succeeds\n\n**Planning:** .agent_planning/field-kernel-phase2/PLAN.md","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-21T13:35:02.128865-07:00","created_by":"bmf","updated_at":"2026-01-21T13:58:31.768353-07:00","closed_at":"2026-01-21T13:58:31.768353-07:00","close_reason":"Completed: Renamed kernelName parameter to fieldOp in applyKernel and applyKernelZipSig functions"}
{"id":"oscilla-animator-v2-z9s","title":"diagnostics-system","description":"Event-driven diagnostics with stable IDs, EventHub coordination, compile/authoring/runtime streams. Core infrastructure complete - EventHub, DiagnosticHub, TargetRef (7 kinds), stable diagnostic IDs, authoring validators (\u003c10ms), compiler integration, DiagnosticConsole UI. 206 tests passing. All 15 acceptance criteria met.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-12T11:57:16.147497-07:00","created_by":"bmf","updated_at":"2026-01-12T11:57:46.284453-07:00","closed_at":"2026-01-12T11:57:46.284459-07:00"}
{"id":"oscilla-animator-v2-zoi","title":"Consider polymorphic inputs (currently only outputs support '???')","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T17:38:42.762563-07:00","created_by":"bmf","updated_at":"2026-01-12T18:02:12.119307-07:00","closed_at":"2026-01-12T18:02:12.119307-07:00","close_reason":"Implemented bidirectional type resolution in resolvePolymorphicTypes(). Polymorphic inputs now infer types from source outputs, enabling blocks like FieldBroadcast to work with any payload type."}
